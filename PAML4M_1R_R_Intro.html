<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="J. Alberto Espinosa">
<meta name="dcterms.date" content="2024-01-02">

<title>Appendix R1: R Code</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="PAML4M_1R_R_Intro_files/libs/clipboard/clipboard.min.js"></script>
<script src="PAML4M_1R_R_Intro_files/libs/quarto-html/quarto.js"></script>
<script src="PAML4M_1R_R_Intro_files/libs/quarto-html/popper.min.js"></script>
<script src="PAML4M_1R_R_Intro_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="PAML4M_1R_R_Intro_files/libs/quarto-html/anchor.min.js"></script>
<link href="PAML4M_1R_R_Intro_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="PAML4M_1R_R_Intro_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="PAML4M_1R_R_Intro_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="PAML4M_1R_R_Intro_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="PAML4M_1R_R_Intro_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active" data-toc-expanded="2">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul class="collapse">
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a>
  <ul class="collapse">
  <li><a href="#working-directory-and-project-setup" id="toc-working-directory-and-project-setup" class="nav-link" data-scroll-target="#working-directory-and-project-setup">Working Directory and Project Setup</a></li>
  </ul></li>
  <li><a href="#r-introduction" id="toc-r-introduction" class="nav-link" data-scroll-target="#r-introduction">1. R Introduction</a>
  <ul class="collapse">
  <li><a href="#r-overview" id="toc-r-overview" class="nav-link" data-scroll-target="#r-overview">1.1 R Overview</a></li>
  <li><a href="#r-packages" id="toc-r-packages" class="nav-link" data-scroll-target="#r-packages">1.2 R Packages</a></li>
  <li><a href="#r-studio-overview" id="toc-r-studio-overview" class="nav-link" data-scroll-target="#r-studio-overview">1.3 R Studio Overview</a></li>
  </ul></li>
  <li><a href="#r-for-analytics" id="toc-r-for-analytics" class="nav-link" data-scroll-target="#r-for-analytics">2. R For Analytics</a>
  <ul class="collapse">
  <li><a href="#this-script" id="toc-this-script" class="nav-link" data-scroll-target="#this-script">2.1 This Script</a></li>
  <li><a href="#general-information-on-r-and-r-studio" id="toc-general-information-on-r-and-r-studio" class="nav-link" data-scroll-target="#general-information-on-r-and-r-studio">2.2 General Information on R and R Studio</a></li>
  <li><a href="#packages-libraries-and-views" id="toc-packages-libraries-and-views" class="nav-link" data-scroll-target="#packages-libraries-and-views">2.3 Packages, Libraries and Views</a></li>
  <li><a href="#reading-data-into-r" id="toc-reading-data-into-r" class="nav-link" data-scroll-target="#reading-data-into-r">2.4 Reading Data Into R</a></li>
  <li><a href="#working-with-r-objects" id="toc-working-with-r-objects" class="nav-link" data-scroll-target="#working-with-r-objects">2.6 Working with R Objects</a></li>
  <li><a href="#variables-data-types-objects-classes-and-data-structures" id="toc-variables-data-types-objects-classes-and-data-structures" class="nav-link" data-scroll-target="#variables-data-types-objects-classes-and-data-structures">2.7 Variables, Data Types, Objects, Classes and Data Structures</a></li>
  <li><a href="#working-with-text" id="toc-working-with-text" class="nav-link" data-scroll-target="#working-with-text">2.8 Working with Text</a></li>
  <li><a href="#functions" id="toc-functions" class="nav-link" data-scroll-target="#functions">2.9 Functions</a></li>
  <li><a href="#program-control-ifs" id="toc-program-control-ifs" class="nav-link" data-scroll-target="#program-control-ifs">2.10 Program Control: If’s</a></li>
  <li><a href="#program-control-loops" id="toc-program-control-loops" class="nav-link" data-scroll-target="#program-control-loops">2.11 Program Control: Loops</a></li>
  <li><a href="#simple-statistics-with-r" id="toc-simple-statistics-with-r" class="nav-link" data-scroll-target="#simple-statistics-with-r">2.12 Simple Statistics with R</a></li>
  </ul></li>
  <li><a href="#r-markdown-and-bookdown" id="toc-r-markdown-and-bookdown" class="nav-link" data-scroll-target="#r-markdown-and-bookdown">3. R Markdown and Bookdown</a>
  <ul class="collapse">
  <li><a href="#r-markdown" id="toc-r-markdown" class="nav-link" data-scroll-target="#r-markdown">R Markdown</a></li>
  <li><a href="#bookdown" id="toc-bookdown" class="nav-link" data-scroll-target="#bookdown">Bookdown</a></li>
  </ul></li>
  <li><a href="#quarto" id="toc-quarto" class="nav-link" data-scroll-target="#quarto">4. Quarto</a></li>
  <li><a href="#shiny" id="toc-shiny" class="nav-link" data-scroll-target="#shiny">5. Shiny</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Appendix R1: R Code</h1>
<p class="subtitle lead">Introduction to R</p>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>J. Alberto Espinosa </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">January 2, 2024</p>
    </div>
  </div>
  
    
  </div>
  
<div>
  <div class="abstract">
    <div class="abstract-title">Abstract</div>
    This quarto file contains a basic introduction to R, R Studio, R Markdown and Quarto. If you have no prior experience with R, this could be a good place to start, as it covers most of the necessary R functions, objects and commands to build basic models. For deeper content on R, please refer to some of the books noted below. For the corresponding conceptual material, consult the book <a href="https://www.amazon.com/dp/B0C2RX8NY1">Predictive Analytics and Machine Learning for Managers</a>.
  </div>
</div>

</header>

<section id="introduction" class="level1">
<h1>Introduction</h1>
<p><em>This script was created by J. Alberto Espinosa for educational and training purposes. Feel free to use this material for your own work, but please do not share or duplicate without the author’s permission.</em></p>
<section id="working-directory-and-project-setup" class="level2">
<h2 class="anchored" data-anchor-id="working-directory-and-project-setup">Working Directory and Project Setup</h2>
<p>It is <strong>very important</strong> that you tell R what your work directory is. I <strong>STRONGLY</strong> recommend creating one working folder (e.g., <code>c:\PredictivAnalytics\R</code>) in your computer for all this work in this class and keep all your scripts and data files in that directory. R works better when all the scripts and data files for a project are in a single directory and this will make your life much easier. As you become more experienced you will learn to organize your work in folders, but to start with, it is simpler to have everything in one folder.</p>
<p><strong>IMPORTANT:</strong> BY FAR, THE MOST COMMON SOURCE OF PROBLEMS using R Studio is the IMPROPER SETUP of the working folders and project environment. Please ensure that you follow these instructions. It will most definitely save you time later.</p>
<section id="project-directory-setup" class="level3">
<h3 class="anchored" data-anchor-id="project-directory-setup">Project Directory Setup</h3>
<p>While setting a working directory is useful, it is even better to set a project directory. When you create a project in R Studio and then open it, your working directory will be set automatically. In addition, all the data files and variables you were working with in your last session will open too. This is a very convenient feature of R Studio. In my opinion, setting a project is a MUST when working with R and it makes it very easy to switch from one project to another. It will really make your R Studio work very efficient.</p>
<p>To create a project for this class, select:</p>
<p>File -&gt; New Project -&gt; Existing Directory.</p>
<p>Then browse and navigate to your working folder and click on Create Project. That’s it. Now you can open or switch projects from the scrollable list in the upper right corner of R Studio.</p>
</section>
<section id="working-directory" class="level3">
<h3 class="anchored" data-anchor-id="working-directory">Working Directory</h3>
<p>Once you setup your project as suggested above, you don’t need to worry about defining or activating your working directory. When you open a project, the working environment will be restored. However, if you wish to define a different work directory (not recommended), you can do so with this command:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"C:/PredictiveAnalytics/R"</span>) <span class="co"># But use the actual work folder you want to use</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>As you work with many other projects, you will probably have several working directories and you may be switching directories from time to time. To see, which is the current working directory in your R Studio environment enter:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">getwd</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="packages" class="level3">
<h3 class="anchored" data-anchor-id="packages">Packages</h3>
<p>R has tons of packages available for download from the Comprehensive R Archive Network (CRAN). You can find out more about CRAN and their available resources at: <a href="https://cran.r-project.org/.">https://cran.r-project.org/</a></p>
<p>Before you can use a package, you need to <strong>install</strong> it and then <strong>load</strong> into your work environment. You install a package only once (or when you want to update to a new version). Once installed in your computer, you don’t need to install it again.</p>
<p>A package contains one or more libraries, each containing one or more functions and data sets ready for you to use. In contrast to the installation, you need to load the particular library you want to use after you start R. Once the library is load it, it will remain loaded until you unload it yourself or until you quit your R session.</p>
<p>To install packages and load libraries, please open the JAE_Packages.R, go to the command that has the <code>install.packages()</code> command for the package you wish to install and hit <strong>Ctrl-Enter</strong>.</p>
<p>To load a library from a package go to the command that has the <code>library()</code> or <code>require()</code> command for the package or library you want to load and hit <strong>Ctrl-Enter</strong>.</p>
</section>
<section id="useful-books" class="level3">
<h3 class="anchored" data-anchor-id="useful-books">Useful Books</h3>
<p>I recommend the following books:</p>
<section id="introduction-to-statistical-learning-with-r-islr" class="level4">
<h4 class="anchored" data-anchor-id="introduction-to-statistical-learning-with-r-islr">Introduction to Statistical Learning with R (ISLR)</h4>
<p>This is an excellent book written by some of the top scholars in <strong>statistical learning</strong>. The book also comes with its own <strong>{ISLR}</strong> package and datasets, some of which I use in the examples in this book. Please install this package so that you get access to the included data samples.</p>
<p>For a <strong>free PDF copy</strong> of this book and for further information on the ISLR book, their datasets, R code, and other resources see: <a href="https://www.statlearning.com/">https://www.statlearning.com/</a>.</p>
<p>To load access the data sets in the <strong>{ISLR}</strong> library, just load the library:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ISLR)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Please note that the authors have also published the <strong>Python</strong> version of their book with Python code examples and exercises, which are available on the same web site above.</p>
<p>To read a data sets from this (or other) web sites, for example use:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>MyData <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">"https://www.statlearning.com/s/Credit.csv"</span>,</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">sep =</span> <span class="st">","</span>, </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">head =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>csv denotes a <code>"comma-separated"</code> file</li>
<li><code>sep = ","</code> denotes that the data elements are separated by a comma (some files are separated by semi-colons, tabs, etc.)</li>
<li><code>head = T</code> or head=TRUE mean that the first row of the table contains column names</li>
<li><code>row.names = 1</code> means that the first column does not contain data, but row names to identify the observations.</li>
</ul>
<p>You can also use the <code>read.csv()</code> function, but the defaults are <code>sep = ","</code> and <code>head = T</code>, so you don’t need to specify these parameters:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>MyData <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"https://www.statlearning.com/s/Credit.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>more generally, use the following to read any data set from the web (use the parameter <code>row.names = 1</code> only if the first column contains row ID’s or row names, not actual data):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>MyData <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">"web-URL/DataFileName.data"</span>, </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">sep =</span> <span class="st">","</span>, </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">head =</span> T, </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>                     <span class="at">row.names =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To list the data sets in all active (loaded) libraries enter:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To list the data sets contained in a particular package enter:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="at">package =</span> <span class="st">"ISLR"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="applied-predictive-modeling" class="level4">
<h4 class="anchored" data-anchor-id="applied-predictive-modeling">Applied Predictive Modeling</h4>
<p>This book is an excellent book to learn <strong>predictive modeling</strong> with R. The book does a comprehensive job at describing how to use the <strong>{caret}</strong> packge, which was developed by one of the book authors, Max Kuhn. The <strong>{caret}</strong> package is excellent because it does not fit models itself, but makes calls to all the main machine learning and predictive modeling libraries out there. With a single command <code>train()</code> you can fit just about any model by changing one parameter. For example, using the parameter <code>method =</code> you can quickly change a model from an OLS regression, to a tree, a random forest, or any other method, and with the <code>trainControl()</code> function you can quickly change the cross-validation method used by the model. This is a book I would highly recommend after reading the present book, to become more producting and sophisticated writing predictive models.</p>
<p>See:</p>
<p><a href="http://appliedpredictivemodeling.com/">http://appliedpredictivemodeling.com/</a><br>
<a href="https://rdrr.io/cran/caret/man/models.html">https://rdrr.io/cran/caret/man/models.html</a></p>
</section>
<section id="r-for-everyone-second-edition" class="level4">
<h4 class="anchored" data-anchor-id="r-for-everyone-second-edition">R for Everyone, Second Edition</h4>
<p>This is a book by Jared Lander, which is great for anyone who has never used R and wants to get up to speed quickly. It start with the basics of R installations, R Studio, packages, data structures, etc., and it ends with a nice coverage of basic statistical models. It has a nice video tutorial with 16+ hours of instruction, but it is a bit pricey.</p>
<p>See: <a href="https://www.jaredlander.com/r-for-everyone/">https://www.jaredlander.com/r-for-everyone/</a></p>
</section>
</section>
</section>
</section>
<section id="r-introduction" class="level1">
<h1>1. R Introduction</h1>
<section id="r-overview" class="level2">
<h2 class="anchored" data-anchor-id="r-overview">1.1 R Overview</h2>
<p><strong>Notes:</strong></p>
<ol type="1">
<li><p>A comment in a plain R script starts with a <code>#</code> which tells R that it is not an actual R command, but just some documentation text.</p></li>
<li><p>To run an R command, you can either type it below in the R console, or select the line in the script and press Ctrl-Enter.</p></li>
</ol>
<p>R is a dialect of S. S was created in the Bell Labs by John Chambers and his team as an object oriented language to do data analysis, statistical modeling, simulation and graphics.</p>
<p>R is a dialect of S. In other words, R is an improved version of R with very flexible and powerful capabilities to model problems and analyze data. R is different than S, but it was conceptualized as an improvement to S, so most S code will run fine in R.</p>
<p>The name R comes from their two creators Ross Ihaka and Robert Gentleman (what a great name) from the University of Auckland, New Zealand.</p>
<p>R is an <strong>open source</strong>, <strong>object-oriented</strong> software programming language written specifically for data analysis:</p>
<p>What is <strong>open source</strong> software? It is software developed by a community of volunteers, who also maintain and update the software and all related packages and datasets. Not all open source software is free of charge, but R is free. The R community material is available at the CRAN site.</p>
<p>What is <strong>CRAN</strong>? It is the “Comprehensive R Archive Network” and it serves as the central repository of R software, documentation and other R resources.</p>
<p>See: <a href="https://cran.r-project.org/">https://cran.r-project.org/</a></p>
<p>What is <strong>object-oriented</strong>? Most modern software languages are object-oriented. All it means is that EVERYTHING you do in R gets stored in a container called an object. An object has 2 things: properties and methods. Properties are the data contained in the object; Methods are routines and functions that can be used to work with the object. They are all conveniently stored inside the object.</p>
<p>For example, in this command we use the <code>lm()</code> function to fit a regression model:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>lm.fit <span class="ot">&lt;-</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> cyl <span class="sc">+</span> disp <span class="sc">+</span> hp <span class="sc">+</span> wt, </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>             <span class="at">data =</span> mtcars) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><code>lm()</code> is a linear model (regression) function available in the <strong>{stats}</strong> package, which loads automatically when you start R. It will fit a predictive model to predict <strong>mpg</strong> (miles per gallon) using cylinders, displacement, horsepower and weight as predictors. The model is fit using the <strong>mtcars</strong> data set available in the <strong>{dataset}</strong> package, which also loads automatically when you start R. The results of this regression are stored in an <strong>lm() object</strong> (i.e., the function that created it), which we have chosen to name <strong>lm.fit</strong>. We could have used any name for the object.</p>
<p>When you run the command above you see nothing, but the results of the model are stored in the object <strong>lm.fit</strong>. For example, you can see the summary results with the <code>summary()</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(lm.fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = mpg ~ cyl + disp + hp + wt, data = mtcars)

Residuals:
    Min      1Q  Median      3Q     Max 
-4.0562 -1.4636 -0.4281  1.2854  5.8269 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) 40.82854    2.75747  14.807 1.76e-14 ***
cyl         -1.29332    0.65588  -1.972 0.058947 .  
disp         0.01160    0.01173   0.989 0.331386    
hp          -0.02054    0.01215  -1.691 0.102379    
wt          -3.85390    1.01547  -3.795 0.000759 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 2.513 on 27 degrees of freedom
Multiple R-squared:  0.8486,    Adjusted R-squared:  0.8262 
F-statistic: 37.84 on 4 and 27 DF,  p-value: 1.061e-10</code></pre>
</div>
</div>
<p>For further information on R see:</p>
<p><a href="https://www.r-project.org/about.html">https://www.r-project.org/about.html</a>; and <a href="https://en.wikipedia.org/wiki/R_%28programming_language%29">https://en.wikipedia.org/wiki/R_%28programming_language%29</a></p>
<p>For frequently asked questions on R, see:</p>
<p><a href="https://cran.r-project.org/doc/FAQ/R-FAQ.html">https://cran.r-project.org/doc/FAQ/R-FAQ.html</a></p>
<p>To get started with R, you can use this documentation from CRAN</p>
<p><a href="https://cran.r-project.org/doc/contrib/Paradis-rdebuts_en.pdf">https://cran.r-project.org/doc/contrib/Paradis-rdebuts_en.pdf</a><br>
<a href="https://cran.r-project.org/doc/manuals/R-intro.pdf">https://cran.r-project.org/doc/manuals/R-intro.pdf</a></p>
<p>You can install R by downloading it from a “mirror” site. The R installation files are posted in several similar sites. You can pick any mirror site, but it is recommended to pick one that is in close proximity to your location. In my experience, it is best to pick a mirror site that is more reliable. The best mirror site in the USA (Berkeley) seems to work well.</p>
<p><a href="https://www.r-project.org/">https://www.r-project.org/</a></p>
<p><strong>R Studio</strong> has lots of packages and resources to help you work with R. Here are a couple of useful R Studio resources:</p>
<p><a href="https://www.rstudio.com/resources/">https://www.rstudio.com/resources/</a> for R Studio Resources<br>
<a href="https://www.rstudio.com/resources/cheatsheets/">https://www.rstudio.com/resources/cheatsheets/</a> for useful cheat sheets</p>
</section>
<section id="r-packages" class="level2">
<h2 class="anchored" data-anchor-id="r-packages">1.2 R Packages</h2>
<p>The power of R rests on the thousands of packages already written for R, which are publicly available at CRAN. We discuss how to install packages and load their respective libraries a bit later. To view all R packages, see:</p>
<p><a href="https://cran.r-project.org/web/packages/available_packages_by_name.html">https://cran.r-project.org/web/packages/available_packages_by_name.html</a></p>
<p>The packages necessary to follow this book are in in the R script <strong>PAML4M_1R_Packages.R</strong>. Please open this script and run all the installation commands <code>install.packages("packagename")</code>. This will install all the packages and their respective libraries, necessary to run the R scripts for this book. Also, pay special attention to the notes about RTools, as you may need to download and install a version of RTools to match your R version from the CRAN repository.</p>
</section>
<section id="r-studio-overview" class="level2">
<h2 class="anchored" data-anchor-id="r-studio-overview">1.3 R Studio Overview</h2>
<p>You can run R and write code and develop R scripts directly in the R console. However, like with most software languages, it is best to use an <strong>“Integrated Development Environment” (IDE)</strong>. An IDE gives you a nice environment and tools to make it easier to develop programs. Without question the IDE of choice for R is R Studio, which is also open source and free. Chances are, you are using R Studio right now.</p>
<p>R Studio provides 4 different windows:</p>
<ol type="1">
<li><p>Top-Left: Script window - this is where you write, save and open your R scripts</p></li>
<li><p>Bottom-Left: R Console - this is where you can type R commands directly and where R displays results and messages when you run commands. If you were not using R Studio, you would only see this R Console.</p></li>
<li><p>Top-Right: 3 tabs: (1) Environment window - this is where you can see any R objects created or opened (e.g., variables, data tables, etc.). Notice that there is also a History tab where you can review all the R commands you have run since you started R. This is a great tool when you are trying various commands in the R Console and you want to re-trace your steps or copy-paste a batch of commands from the History to a script; (2) History – R Studio keeps track of all the commands you issue from the console. You can highlight and group of commands from the history and paste them into the active script; (3) Connections – we will not use this tab in this class, but this section helps you setup and access connections to data sources.</p></li>
<li><p>Bottom-Right: Model explorer - this is where you can view: files in the working directory; plots generated by R commands; packages available and installed; help displays, etc.</p></li>
</ol>
<p><strong>Special R Studio Packages</strong>: most R packages are designed to manipulate and/or analyze data. But R Studio has a number of very useful packages you can load to make your development environment more productive. These include:</p>
<ul>
<li><p>R Markdown: a package to create documents with marked up text, R code, R output, graphs, etc.</p></li>
<li><p>Quarto: similar to R Markdown. Quarto is bundled with RStudio v2022.07.1 and higher, so there is no need to install it or update it. Quarto is used to create dynamic content with R, Python, Julia and Observable languages. Using R Markdown or Quarto is a matter of preference. Quarto is preferred if you plan to use both R and Python. It is also superior to R Markdown for formatting documents and book. For most practical purposes, R Markdown works well and will continue to be supported by R Studio for the foreseeable future.</p></li>
<li><p>knitr: a companion to R Markdown, which knits your markdown files into HTML, Word or PDF documents.</p></li>
<li><p>pandoc: an open source document converter. knitr does the knitting of text with R code and R output. pandoc does the conversion of the output to the desired format (e.g., HTML, Word, PDF, etc.)</p></li>
<li><p>Shiny: a package to build interactive R applications that run on the web.</p></li>
<li><p>ggplot2: one of the most popular and powerful packages to visualize data</p></li>
<li><p>dplyr: powerful library to manipulate data</p></li>
<li><p>tidyverse: is not a package, but a collection of other packages designed for data science work. Installing {tidiverse} will install packages like {ggplot2}, [dplyr], etc. There is a companion book by master trainers, Wickham and Grolemund.</p></li>
</ul>
<p><a href="https://r4ds.had.co.nz/">https://r4ds.had.co.nz/</a></p>
<p>For a complete description of available R Studio Packages, see:</p>
<p><a href="https://r4ds.had.co.nz/">https://www.rstudio.com/products/rpackages</a></p>
</section>
</section>
<section id="r-for-analytics" class="level1">
<h1>2. R For Analytics</h1>
<section id="this-script" class="level2">
<h2 class="anchored" data-anchor-id="this-script">2.1 This Script</h2>
<p>This document was generated created in Quarto, which is a great tool to program analytics work in R and generate reports by <strong>knitting</strong> the text, R code and R output in the markdown file into a Word, PDF, HTML, PowerPoint or some other file formats. I discuss R Markdown and Quarto further towards the end of this file. For now, note that R Markdown and Quarto contain 3 main types of sections:</p>
<ul>
<li><p>The YAML – YAMl Ain’t Markdown Language (a recursive acronym). This is the header of the file where you place the title, sub-title, author, etc., along with the file format to knit to and whether you want a table of contents generated.</p></li>
<li><p>The markdown section – This is the main text section of an R Markdown or Quarto file, where you type narratives and other information.</p></li>
<li><p>Code Cells – are sections contained between ```{r} and ``` containing the R code to be executed. You can control whether to display just the output or results from your R scripts and/or the R code that generated it.</p></li>
</ul>
<p>More information on R Markdown at the end of this file.</p>
</section>
<section id="general-information-on-r-and-r-studio" class="level2">
<h2 class="anchored" data-anchor-id="general-information-on-r-and-r-studio">2.2 General Information on R and R Studio</h2>
<p>If you need help with R or any R related tools, you can always Google, of course. But there is a Google driven search engine customized for R-related searches. This will filter out search results that are unrelated to R. Here it is. Try it:</p>
<p><a href="http://rseek.org">http://rseek.org</a></p>
<p>To search and use open source R code created by others, signup for GitHub then search for R software code - you can copy all you want, it’s open source!!</p>
<p><a href="https://github.com/">https://github.com/</a></p>
<section id="a-few-ways-to-run-r-commands" class="level3">
<h3 class="anchored" data-anchor-id="a-few-ways-to-run-r-commands">A Few Ways to Run R Commands</h3>
<ol type="1">
<li><p>From the R Console below, just type the command and press Enter</p></li>
<li><p>From the script, go to any script line and press Ctrl + Enter (PC) or Cmd + Enter (Mac)</p></li>
<li><p>You can run entire code cells by pressing the play icon on the top right</p></li>
<li><p>If you’ve been working in R for a while without saving your work in a script, you can go to the History tab on the top right window of R Studio. You can highlight any command or group of commands and either click “To Console” to run the commands, or “To Source” to copy the commands to the active script.</p></li>
</ol>
</section>
<section id="getting-help" class="level3">
<h3 class="anchored" data-anchor-id="getting-help">Getting Help</h3>
<p>In RStudio, the help system is located in the “Help” tab</p>
<p>You can request help for a keyword with ??“<keyword>”, e.g.:</keyword></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>??<span class="st">"regression"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Use ? to get help for a given command, e.g.:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>?<span class="fu">lm</span>() <span class="co"># Help on the lm() function to build linear models</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If you need help on a particular function contained in a specific library, you need to load that library first, and then request help. For example, to get help on the <code>ggplot()</code> function you need to first load the <code>{ggplot2}</code> library:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(ggplot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="vignettes-important-documentation-supplements" class="level3">
<h3 class="anchored" data-anchor-id="vignettes-important-documentation-supplements">Vignettes – Important Documentation Supplements</h3>
<p>You will quickly learn that the R documentation on packages and functions can be cryptic and often incomplete. This documentation is written by package developers and they often include just the minimal information required to understand the package contents. More complete documentation and code examples are usually provided in additional documents called <strong>“vignettes”</strong>, which are supplementary and optional documentation for packages and functions. Some packages have vignettes and some do not. To find out the vignettes in your installed packages”</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">browseVignettes</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To view the vignette associated with a particular package you installed, enter:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">browseVignettes</span>(<span class="st">"car"</span>) <span class="co"># Vignette for the package "car"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>VERY IMPORTANT: R is Case Sensitive !!!</strong></p>
<p>Be sure to type upper or lower case as required For example <code>GetWD()</code> or <code>GETWD()</code> won’t work!! You must type all commands and library names exactly as they are spelled – e.g., <code>getwd()</code> will work!!</p>
</section>
<section id="comments" class="level3">
<h3 class="anchored" data-anchor-id="comments">Comments</h3>
<p>The <code>#</code> sign is use to write non-executable comments. Don’t rely on your memory and document your scripts heavily. You’ll thank me for it later. You can comment like “I’m doing in this text”, or you can simply add a sign after an R command to document that command. Everything in the command line after the <code>#</code> sign will be ignored during the command execution.</p>
<p>This can be used to suppress the execution of an R command without deleting the command (i.e., commented out). For example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ISLR)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="tutorials" class="level3">
<h3 class="anchored" data-anchor-id="tutorials">Tutorials</h3>
<p>Datacamp – an excellent source of high quality tutorials <a href="https://www.datacamp.com/">https://www.datacamp.com/</a><br>
Datacamp R course: <a href="https://www.datacamp.com/onboarding/learn?technology=r">https://www.datacamp.com/onboarding/learn?technology=r</a><br>
Datacamp Python course: <a href="https://www.datacamp.com/onboarding/learn?technology=python">https://www.datacamp.com/onboarding/learn?technology=python</a></p>
</section>
<section id="useful-web-sites" class="level3">
<h3 class="anchored" data-anchor-id="useful-web-sites">Useful Web Sites</h3>
<p><a href="http://www.statmethods.net/">http://www.statmethods.net/</a><br>
<a href="https://support.rstudio.com/hc/en-us">https://support.rstudio.com/hc/en-us</a><br>
<a href="https://www.rdocumentation.org/">https://www.rdocumentation.org/</a></p>
<p><a href="https://medium.com/activewizards-machine-learning-company/top-20-r-libraries-for-data-science-in-2018-infographic-956f8419f883">https://medium.com/activewizards-machine-learning-company/top-20-r-libraries-for-data-science-in-2018-infographic-956f8419f883</a></p>
</section>
</section>
<section id="packages-libraries-and-views" class="level2">
<h2 class="anchored" data-anchor-id="packages-libraries-and-views">2.3 Packages, Libraries and Views</h2>
<section id="installing-packages" class="level3">
<h3 class="anchored" data-anchor-id="installing-packages">Installing Packages</h3>
<section id="packages-1" class="level4">
<h4 class="anchored" data-anchor-id="packages-1">Packages</h4>
<p>You can write lots of very powerful R Scripts, which is great, but the real power of R is in the thousands of R packages that others have already written, which are public and free.</p>
<p>In the R documentation, it is customary to refer to packages with curly brackets, e.g., {base}. Functions or libraries contained in these packages are usually specified like this: <code>lm(){stats}</code></p>
</section>
<section id="base-package" class="level4">
<h4 class="anchored" data-anchor-id="base-package">Base Package</h4>
<p>R comes with a pre-installed <code>{base}</code> package with lots of useful libraries</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(<span class="at">package =</span> <span class="st">"base"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>All other packages need to be installed and activated.</p>
<p>For available functions in the <code>{base}</code> package, see: <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/00Index.html">https://stat.ethz.ch/R-manual/R-devel/library/base/html/00Index.html</a></p>
<p>Similarly, R comes with several included data sets with the base installation, which are contained in the <code>{dataset}</code> package</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="at">package =</span> <span class="st">"datasets"</span>)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="at">help =</span> <span class="st">"datasets"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Using a package is a 2 step process:</p>
<ol type="1">
<li>You first need to install the package. You only need to do this once and the package will remain installed until you uninstall it.</li>
</ol>
<p>From time to time, you may want to check to see if a package was updated. To update all packages you can use the update.packages() function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>?update.packages </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To update a specific package type</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">update.packages</span>(<span class="st">"packagename"</span>). </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To view installed packages enter</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">installed.packages</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li>To use a library contained in a package, you need to load the library. It will remain open until you quit your R session. To load a library enter:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(libraryname) <span class="co"># or </span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(libraryname)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Please note that some packages are installed automatically with the standard installation of R. There is no need to further install these packages. Also, some packages have dependencies (i.e., a given package needs other packages to work). In this case, all the dependent packages also get installed automatically.</p>
<p>Review the help documentation for these functions:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>?<span class="fu">install.packages</span>()</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>?remove.packages</span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>?update.packages</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>?<span class="fu">installed.packages</span>()</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>?<span class="fu">library</span>()</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>?<span class="fu">require</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You can also install packages by clicking on the Packages tab in the model viewer, clicking Install, and then following the steps. Similarly, you can also activate packages by checking the corresponding box in the Packages tab.</p>
<p>You rarely need to uninstall packages, but if you wish to you can do it by unchecking the corresponding box in the Packages pane, or using the command:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">remove.packages</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You may sometimes need to deactivate or unload packages. You can do this by un-checking the corresponding box in the Packages pane or entering this command (this does not uninstall the package, it just unloads it from the work environment):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">detach</span>(<span class="st">"packages:PackageName"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="masking" class="level4">
<h4 class="anchored" data-anchor-id="masking">Masking</h4>
<p>Important note about detaching packages. When you load one package, its functions may mask functions from other previously loaded packages, if they have the same function name. Most of the time, masking is not an issue, but occasionally there may be two functions with the same name in memory from different packages and one may mask the other. For example, the summarize() function is available in these two packages:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(plyr)</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(Hmisc)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Each does something different. Check it out:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>?summarize</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If you want to use <code>summarize()</code> from the <strong>{plyr}</strong> library, you can do it 2 ways: (1) detach the <code>{Hmisc}</code> library; or (2) indicate with double columns which function you wish to invoke:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>plyr<span class="sc">::</span><span class="fu">summarize</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To list all installed packages enter:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">installed.packages</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To view just the package names (column 1)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">installed.packages</span>()[, <span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then get help on that package</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(<span class="at">package =</span> <span class="st">"base"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To view all available packages go to: <a href="https://cran.r-project.org/web/packages/available_packages_by_name.html">https://cran.r-project.org/web/packages/available_packages_by_name.html</a></p>
<p>To list available libraries enter:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To get documentation and a list of functions in a given package enter:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="at">help =</span> PackageName)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To view the data sets available in all active packages enter:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To view the data sets in a particularly active package enter:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="at">package =</span> <span class="st">"ISLR"</span>) <span class="co"># Example for the ISLR package</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To load a specific data set in to memory</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(dataSetName) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To list the data sets in all packages available, enter:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(<span class="at">package =</span> <span class="fu">.packages</span>(<span class="at">all.available =</span> T))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="installing-views" class="level4">
<h4 class="anchored" data-anchor-id="installing-views">Installing Views</h4>
<p>Views are collections of packages by function or type of analysis. You can view the various packages that are contained in a view at</p>
<p><a href="http://cran.r-project.org/web/views/">http://cran.r-project.org/web/views/</a></p>
<p>Once you find a view and wish to install the packages it contains, installing the view automatically installs all the packages it contains, if not already installed. In oreder to install views, you first need to install and load the CRAN Task View “ctv” package:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"ctv"</span>)</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">"ctv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then, for example, if you want to install the “Graphics” view, use:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.views</span>(<span class="st">"Graphics"</span>) <span class="co"># which will install all these packages:</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><a href="https://cran.r-project.org/web/views/Graphics.html">https://cran.r-project.org/web/views/Graphics.html</a></p>
</section>
</section>
</section>
<section id="reading-data-into-r" class="level2">
<h2 class="anchored" data-anchor-id="reading-data-into-r">2.4 Reading Data Into R</h2>
<p>It is recommended to place all your data sources in your Project working folder.</p>
<p>Many data sets, and most of the ones we will use in this class are contained in packages, so the data becomes available after you load the respective libraries. To view all data sets that either come with R or are available in loaded libraries enter:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To view the first 6 rows of a data set and the respective column name for example <strong>mtcars</strong> enter:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(mtcars) <span class="co"># Car and gas consumption data</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                   mpg cyl disp  hp drat    wt  qsec vs am gear carb
Mazda RX4         21.0   6  160 110 3.90 2.620 16.46  0  1    4    4
Mazda RX4 Wag     21.0   6  160 110 3.90 2.875 17.02  0  1    4    4
Datsun 710        22.8   4  108  93 3.85 2.320 18.61  1  1    4    1
Hornet 4 Drive    21.4   6  258 110 3.08 3.215 19.44  1  0    3    1
Hornet Sportabout 18.7   8  360 175 3.15 3.440 17.02  0  0    3    2
Valiant           18.1   6  225 105 2.76 3.460 20.22  1  0    3    1</code></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(mtcars) <span class="co"># Shows the last 6 rows in the table</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>                mpg cyl  disp  hp drat    wt qsec vs am gear carb
Porsche 914-2  26.0   4 120.3  91 4.43 2.140 16.7  0  1    5    2
Lotus Europa   30.4   4  95.1 113 3.77 1.513 16.9  1  1    5    2
Ford Pantera L 15.8   8 351.0 264 4.22 3.170 14.5  0  1    5    4
Ferrari Dino   19.7   6 145.0 175 3.62 2.770 15.5  0  1    5    6
Maserati Bora  15.0   8 301.0 335 3.54 3.570 14.6  0  1    5    8
Volvo 142E     21.4   4 121.0 109 4.11 2.780 18.6  1  1    4    2</code></pre>
</div>
</div>
<p>You can also double-click on the data set in the environment viewer on the right to view the full table. You can also view the full table with the <code>fix()</code> function, which also allows you to edit the data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="fu">fix</span>(mtcars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>While you can read multiple data sources into R (such as SPSS, SAS and Excel), I find it a lot easier to manipulate data sets in Excel and then save the datasheet as a <strong>“comma separated values”</strong> or <strong>“CSV”</strong> file. For example, many of the packages to read Excel data into R require current versions of Java or certain versions of Excel, whereas CSV files work universally.</p>
<p>If you want to read a <strong>CSV</strong> file from your working directory, enter:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a>heart <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">"Heart.csv"</span>, </span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">header =</span> T, </span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">sep =</span> <span class="st">","</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>First note that we are reading a file named <strong>Heart.csv</strong> with upper case H and storing in an R data fram object named <strong>heart</strong> with lower case h. You can name your objects any way you wish but these names are case sensitive.</p>
<p>The <code>header = T</code> attribute specifies that the first row in the <code>.csv</code> file contains the column or variable names, which is the recommended way to do it. The <code>sep = ","</code> parameter specifies that the values are separated by commas.</p>
<p>If the <code>.csv</code> file is not located in the working directory, you need to specify the directory using forward slashes <code>/</code> (don’t use the backslashes <code>\</code>). Ex:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>mydata <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">"c:/PredictiveAnalytics/R/Auto.csv"</span>, </span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>                     <span class="at">header =</span> T, </span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>                     <span class="at">sep =</span> <span class="st">","</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>or simply move into your working directory and enter:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb49"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a>AutoData <span class="ot">&lt;-</span> <span class="fu">read.table</span>(<span class="st">"Auto.csv"</span>, </span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a>                       <span class="at">header =</span> T, </span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a>                       <span class="at">sep =</span> <span class="st">","</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You can also use the <code>read.csv()</code> function, which may simplify the syntax because the default parameters are <code>header = T</code> and <code>"sep = ","</code>, so you can omit these parameters:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>AutoData <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"Auto.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>By the way, you will notice that the R data frames will show up in the Enviroment tab on the top right window. You can double-click on the respective data frames to explore them. You can also explore the files with other R commands, like:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(AutoData) <span class="co"># To see the column headers and first few records</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(AutoData) <span class="co">#To see the column (i.e., variable) names in the table</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Also note that there are a number of R packages you can use to read files from popular programs like Excel, MS Access, SPSS, SAS, etc. These are a few:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"xlsx"</span>) <span class="co"># Excel</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"xlsxjars"</span>) <span class="co"># Excel</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"rJava"</span>) <span class="co"># Excel</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"foreign"</span>) <span class="co"># Stata, Minitab, SPSS, SAS, etc.</span></span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"XML"</span>) <span class="co"># XML</span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"rjson"</span>) <span class="co"># JSON</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>While these packages are useful, they often become outdated because vendors like Microsoft and SASD change their file formats from time to time. However, all vendor software has functions to import into and read from <strong>.csv</strong> files. So, my advise is to convert your source files into <strong>.csv</strong> format and then read them into your data frames as explained above.</p>
<section id="saving-data-from-r-to-a-file" class="level3">
<h3 class="anchored" data-anchor-id="saving-data-from-r-to-a-file">Saving Data from R to a file</h3>
<section id="saving-a-data-frame-to-a-csv-file" class="level4">
<h4 class="anchored" data-anchor-id="saving-a-data-frame-to-a-csv-file">Saving a data frame to a “csv” file</h4>
<p>When you create and then manipulate a data frame in R, the data and your changes will only be available until you terminate R. This is a good thing, because you can test manipulate your data file in any way you wish and when you re-read the file from the source you will get the original fresh copy, not the changed version. But what if you wish to make permanent changes? There are a couple of things you can do:</p>
<ol type="1">
<li><p>Manipulate the data frame in any way you wish and save the script commands you used. This way, next time you read the file you can run the data pre-processing scripts as needed.</p></li>
<li><p>Or, you can save your changes into a different <strong>.csv</strong> file:</p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.table</span>(AutoData, </span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>            <span class="st">"mydata.csv"</span>, </span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">sep =</span> <span class="st">","</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The <code>sep = ","</code> parameter specifies the delimiter between values as a comma, which is most common and one the Excel will read.</p>
<p>The packages listed above for reading from various software data files also have functions for writing to data files. You can consult their respective documentation, if interested.</p>
</section>
</section>
</section>
<section id="working-with-r-objects" class="level2">
<h2 class="anchored" data-anchor-id="working-with-r-objects">2.6 Working with R Objects</h2>
<p>R is an “object-oriented” software language, therefore, it treats everything as objects. An object has two things:</p>
<ol type="1">
<li>data; and</li>
<li>programs or functions, encapsulated together.</li>
</ol>
<p>When you create an object, you can then access it to run its programs/functions and read or manipulate its data. Objects can be used to create other objects using a property of object-orientation called <strong>inheritance</strong>, such that the data and programs from one object are inherited by another.</p>
<p>For example, we can run a regression model to predict miles per gallons using the mtcars data set:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lm</span>(mpg <span class="sc">~</span> cyl <span class="sc">+</span> disp <span class="sc">+</span> hp <span class="sc">+</span> wt, </span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>   <span class="at">data =</span> mtcars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = mpg ~ cyl + disp + hp + wt, data = mtcars)

Coefficients:
(Intercept)          cyl         disp           hp           wt  
   40.82854     -1.29332      0.01160     -0.02054     -3.85390  </code></pre>
</div>
</div>
<p>Or, we can store the model formula in a formula object and then use this object throughout the script. This is convenient when you need to specify a very long and complex formulat and use it in several parts of your script:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>lm.formula <span class="ot">&lt;-</span> mpg <span class="sc">~</span> cyl <span class="sc">+</span> disp <span class="sc">+</span> hp <span class="sc">+</span> wt</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>lm.formula <span class="co"># Check it out -- a text string which we can re-use</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>mpg ~ cyl + disp + hp + wt</code></pre>
</div>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lm</span>(lm.formula, </span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>   <span class="at">data =</span> mtcars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = lm.formula, data = mtcars)

Coefficients:
(Intercept)          cyl         disp           hp           wt  
   40.82854     -1.29332      0.01160     -0.02054     -3.85390  </code></pre>
</div>
</div>
<p>The <code>lm()</code> function above creates an <strong>lm</strong> (linear model) object, but it isn’t stored anywhere. To store it for later reference, assign it to an object with the <strong>&lt;-</strong> assignment operator:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>lm.object <span class="ot">&lt;-</span> <span class="fu">lm</span>(lm.formula, </span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">data =</span> mtcars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Two important functions that are used pervasively to retrieve important data from objects are:</p>
<p><code>summary()</code> – displays key data stored in an object. What gets displayed changes from one object type to another</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(lm.object)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = lm.formula, data = mtcars)

Residuals:
    Min      1Q  Median      3Q     Max 
-4.0562 -1.4636 -0.4281  1.2854  5.8269 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) 40.82854    2.75747  14.807 1.76e-14 ***
cyl         -1.29332    0.65588  -1.972 0.058947 .  
disp         0.01160    0.01173   0.989 0.331386    
hp          -0.02054    0.01215  -1.691 0.102379    
wt          -3.85390    1.01547  -3.795 0.000759 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 2.513 on 27 degrees of freedom
Multiple R-squared:  0.8486,    Adjusted R-squared:  0.8262 
F-statistic: 37.84 on 4 and 27 DF,  p-value: 1.061e-10</code></pre>
</div>
</div>
<p><code>str()</code> – shows the “structure” of the object, i.e., just about all the variable name and sample data stored in the object</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(lm.object)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 12
 $ coefficients : Named num [1:5] 40.8285 -1.2933 0.0116 -0.0205 -3.8539
  ..- attr(*, "names")= chr [1:5] "(Intercept)" "cyl" "disp" "hp" ...
 $ residuals    : Named num [1:32] -1.568 -0.5853 -3.2569 -0.0117 0.8939 ...
  ..- attr(*, "names")= chr [1:32] "Mazda RX4" "Mazda RX4 Wag" "Datsun 710" "Hornet 4 Drive" ...
 $ effects      : Named num [1:32] -113.65 -28.6 6.13 -3.06 -9.54 ...
  ..- attr(*, "names")= chr [1:32] "(Intercept)" "cyl" "disp" "hp" ...
 $ rank         : int 5
 $ fitted.values: Named num [1:32] 22.6 21.6 26.1 21.4 17.8 ...
  ..- attr(*, "names")= chr [1:32] "Mazda RX4" "Mazda RX4 Wag" "Datsun 710" "Hornet 4 Drive" ...
 $ assign       : int [1:5] 0 1 2 3 4
 $ qr           :List of 5
  ..$ qr   : num [1:32, 1:5] -5.657 0.177 0.177 0.177 0.177 ...
  .. ..- attr(*, "dimnames")=List of 2
  .. .. ..$ : chr [1:32] "Mazda RX4" "Mazda RX4 Wag" "Datsun 710" "Hornet 4 Drive" ...
  .. .. ..$ : chr [1:5] "(Intercept)" "cyl" "disp" "hp" ...
  .. ..- attr(*, "assign")= int [1:5] 0 1 2 3 4
  ..$ qraux: num [1:5] 1.18 1.02 1.11 1.17 1.26
  ..$ pivot: int [1:5] 1 2 3 4 5
  ..$ tol  : num 1e-07
  ..$ rank : int 5
  ..- attr(*, "class")= chr "qr"
 $ df.residual  : int 27
 $ xlevels      : Named list()
 $ call         : language lm(formula = lm.formula, data = mtcars)
 $ terms        :Classes 'terms', 'formula'  language mpg ~ cyl + disp + hp + wt
  .. ..- attr(*, "variables")= language list(mpg, cyl, disp, hp, wt)
  .. ..- attr(*, "factors")= int [1:5, 1:4] 0 1 0 0 0 0 0 1 0 0 ...
  .. .. ..- attr(*, "dimnames")=List of 2
  .. .. .. ..$ : chr [1:5] "mpg" "cyl" "disp" "hp" ...
  .. .. .. ..$ : chr [1:4] "cyl" "disp" "hp" "wt"
  .. ..- attr(*, "term.labels")= chr [1:4] "cyl" "disp" "hp" "wt"
  .. ..- attr(*, "order")= int [1:4] 1 1 1 1
  .. ..- attr(*, "intercept")= int 1
  .. ..- attr(*, "response")= int 1
  .. ..- attr(*, ".Environment")=&lt;environment: R_GlobalEnv&gt; 
  .. ..- attr(*, "predvars")= language list(mpg, cyl, disp, hp, wt)
  .. ..- attr(*, "dataClasses")= Named chr [1:5] "numeric" "numeric" "numeric" "numeric" ...
  .. .. ..- attr(*, "names")= chr [1:5] "mpg" "cyl" "disp" "hp" ...
 $ model        :'data.frame':  32 obs. of  5 variables:
  ..$ mpg : num [1:32] 21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...
  ..$ cyl : num [1:32] 6 6 4 6 8 6 8 4 4 6 ...
  ..$ disp: num [1:32] 160 160 108 258 360 ...
  ..$ hp  : num [1:32] 110 110 93 110 175 105 245 62 95 123 ...
  ..$ wt  : num [1:32] 2.62 2.88 2.32 3.21 3.44 ...
  ..- attr(*, "terms")=Classes 'terms', 'formula'  language mpg ~ cyl + disp + hp + wt
  .. .. ..- attr(*, "variables")= language list(mpg, cyl, disp, hp, wt)
  .. .. ..- attr(*, "factors")= int [1:5, 1:4] 0 1 0 0 0 0 0 1 0 0 ...
  .. .. .. ..- attr(*, "dimnames")=List of 2
  .. .. .. .. ..$ : chr [1:5] "mpg" "cyl" "disp" "hp" ...
  .. .. .. .. ..$ : chr [1:4] "cyl" "disp" "hp" "wt"
  .. .. ..- attr(*, "term.labels")= chr [1:4] "cyl" "disp" "hp" "wt"
  .. .. ..- attr(*, "order")= int [1:4] 1 1 1 1
  .. .. ..- attr(*, "intercept")= int 1
  .. .. ..- attr(*, "response")= int 1
  .. .. ..- attr(*, ".Environment")=&lt;environment: R_GlobalEnv&gt; 
  .. .. ..- attr(*, "predvars")= language list(mpg, cyl, disp, hp, wt)
  .. .. ..- attr(*, "dataClasses")= Named chr [1:5] "numeric" "numeric" "numeric" "numeric" ...
  .. .. .. ..- attr(*, "names")= chr [1:5] "mpg" "cyl" "disp" "hp" ...
 - attr(*, "class")= chr "lm"</code></pre>
</div>
</div>
<p>The <code>str()</code> function above shows all the object properties with their respective names pre-fixed with <code>$</code>. To access those values, just enter the object name followed by the <code>$</code> and property name:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>lm.object<span class="sc">$</span>coefficients <span class="co"># Extracting just the coefficients</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept)         cyl        disp          hp          wt 
40.82853674 -1.29331972  0.01159924 -0.02053838 -3.85390352 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">"</span>) <span class="co"># Blank line</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a>lm.object<span class="sc">$</span>fitted.values[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>] <span class="co"># Extracting first 10 predicted values</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        Mazda RX4     Mazda RX4 Wag        Datsun 710    Hornet 4 Drive 
         22.56805          21.58530          26.05685          21.41170 
Hornet Sportabout           Valiant        Duster 360         Merc 240D 
         17.80606          20.18741          15.86737          23.78953 
         Merc 230          Merc 280 
         23.19749          19.22900 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">"</span>) <span class="co"># Blank line</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>lm.object<span class="sc">$</span>residuals[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>] <span class="co"># Extracting first 10 residual errors</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        Mazda RX4     Mazda RX4 Wag        Datsun 710    Hornet 4 Drive 
      -1.56804806       -0.58530266       -3.25685052       -0.01170091 
Hornet Sportabout           Valiant        Duster 360         Merc 240D 
       0.89393888       -2.08741154       -1.56736731        0.61046532 
         Merc 230          Merc 280 
      -0.39748889       -0.02900250 </code></pre>
</div>
</div>
<p>Alternatively, you can get the <code>summary()</code> and <code>str()</code> without creating objects, but this is not so useful:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(<span class="fu">lm</span>(mpg <span class="sc">~</span> cyl <span class="sc">+</span> disp <span class="sc">+</span> hp <span class="sc">+</span> wt, </span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a>           <span class="at">data =</span> mtcars))</span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(<span class="fu">lm</span>(mpg <span class="sc">~</span> cyl <span class="sc">+</span> disp <span class="sc">+</span> hp <span class="sc">+</span> wt, </span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">data =</span> mtcars))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>If you want to store the summary() for later use simply assign it to an object:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a>lm.summary <span class="ot">&lt;-</span> <span class="fu">summary</span>(lm.object)</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>lm.summary</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Notice in the display in the <code>str()</code> results that there are a few values prefixed with <code>$</code>. To access specific data elements from an object we can use the <code>$</code> symbol, which is used to point to variables or columns in data objects.</p>
<p>For example, these show the regression coefficients</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>lm.summary<span class="sc">$</span>coefficients <span class="co"># or</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(lm.object)<span class="sc">$</span>coefficients</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This shows the residuals:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a>lm.summary<span class="sc">$</span>residuals <span class="co"># or</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(lm.object)<span class="sc">$</span>residuals</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note: you can use the options() function to change how R reports results to some extent. The “scipen” attribute is useful to convert scientific notation (e.g., 1.8e-14) to actual numbers (e.g., the number with 14 zeros after the decimal point). Try it</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen =</span> <span class="st">"20"</span>) <span class="co"># scipen = "Scientify Notation Penalty"</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(lm.object) <span class="co"># Check it out</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The <strong>scipen</strong> (i.e., scientific penalty) value tells R to display the value in scientific if there are more than 20 zeros after the decimal point. Now try</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">scipen =</span> <span class="st">"4"</span>)</span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(lm.object) <span class="co"># See the difference</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = lm.formula, data = mtcars)

Residuals:
    Min      1Q  Median      3Q     Max 
-4.0562 -1.4636 -0.4281  1.2854  5.8269 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) 40.82854    2.75747  14.807 1.76e-14 ***
cyl         -1.29332    0.65588  -1.972 0.058947 .  
disp         0.01160    0.01173   0.989 0.331386    
hp          -0.02054    0.01215  -1.691 0.102379    
wt          -3.85390    1.01547  -3.795 0.000759 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 2.513 on 27 degrees of freedom
Multiple R-squared:  0.8486,    Adjusted R-squared:  0.8262 
F-statistic: 37.84 on 4 and 27 DF,  p-value: 1.061e-10</code></pre>
</div>
</div>
<p>Programs/functions that do something with objects have round brackets after them, e.g., <code>mean()</code>, <code>length()</code>, <code>summary()</code></p>
<p>The formula <code>mpg ~ cyl + disp + hp + wt</code> is a typical model formula using R syntax. This function notation is used in various R commands.</p>
<p>The symbol <code>&lt;-</code> represent an <strong>assignment</strong> in R. The <code>lm.fit</code> formula above runs the <code>lm()</code> linear model function and <strong>assigns</strong> (i.e., saves) the result to an object named <strong>lm.fit</strong>.</p>
<p>In many cases the <code>=</code> operator can be used interchangeably with <code>&lt;-</code>. Most serious R developers don’t like to use the <code>=</code> sign because it has a special meaning in some other operations (e.g., testing for equality), but it works well, for example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>lm.object <span class="ot">=</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> cyl <span class="sc">+</span> disp <span class="sc">+</span> hp <span class="sc">+</span> wt, </span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> mtcars) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Also, a simpler example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">3</span> <span class="sc">+</span> <span class="dv">4</span> <span class="co"># Look at the value of x in the Environment window</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>x <span class="co"># Check it out</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7</code></pre>
</div>
</div>
<p>The value resulting from computing <code>3 + 4</code> has been assigned to the variable <code>x</code></p>
<p>These assignment commands work exactly the same:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="dv">3</span> <span class="sc">+</span> <span class="dv">4</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a>x <span class="co"># Check it out</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7</code></pre>
</div>
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="dv">3</span> <span class="sc">+</span> <span class="dv">4</span> <span class="ot">-&gt;</span> x</span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a>x <span class="co"># Check it out</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7</code></pre>
</div>
</div>
<p>Please note that x &lt;- 3 + 4 is <strong>DIFFERENT</strong> than x &lt; - 3 + 4. The first entry assigns 3 + 4 to the variable object x. In the second entry we are evaluating if the object x is smaller than - 3 + 4. One space shift can make a huge difference. So, please ensure that when you use the assignment operator &lt;- there is no space between the &lt; and the -</p>
<section id="exploring-objects" class="level4">
<h4 class="anchored" data-anchor-id="exploring-objects">Exploring objects</h4>
<p>In R Studio, the content of the work space is shown in the Environment tab (top-right). Its contents can also be displayed in the console with the ls() and objects() commands</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ls</span>()</span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="fu">objects</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To delete an object, we pass it as parameter to the rm() function (for remove) by writing it in the brackets of the command:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="variables-data-types-objects-classes-and-data-structures" class="level2">
<h2 class="anchored" data-anchor-id="variables-data-types-objects-classes-and-data-structures">2.7 Variables, Data Types, Objects, Classes and Data Structures</h2>
<section id="overview" class="level3">
<h3 class="anchored" data-anchor-id="overview">Overview</h3>
<p>R, like all statistical software, uses many different data/variable types and classes. Understanding how to work with different data types and classes is key to understanding how to build and interpret models in R.</p>
<p>A variable of a certain type (e.g., character) will contain data of the same type. A variable class and type are two different things. For example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fl">2.3</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(x) <span class="co"># The class is numeric</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(x) <span class="co"># The type is more specific -- double (i.e., with decimals)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "double"</code></pre>
</div>
</div>
<p>The best way to think of a variable is as a container. They can contain just about anything, e.g., a single value, a vector, an array of values a graph, results from an analysis or any R object:</p>
<p>What’s the meaning of the dot <code>"."</code>?</p>
<p>Note: a <code>"."</code> in a variable name is simply part of the name and nothing else; e.g., x, lm.fit, my.data are valid variable names</p>
<section id="simple-data-variable-data-types" class="level4">
<h4 class="anchored" data-anchor-id="simple-data-variable-data-types">Simple Data Variable &amp; Data Types</h4>
<p>These contain single values of a given type, e.g., numeric, character, factor, date, and logical. You don’t need to declare a variable’s type. The variable type is implicitly (automatically) declared when a value is stored in the variable. Certain data types require delimiters, such as double quotes ” for character (i.e., text) data. It is often useful to check or display a particular variable data type:</p>
</section>
<section id="numeric-data" class="level4">
<h4 class="anchored" data-anchor-id="numeric-data">Numeric Data</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fl">2.4</span> <span class="co"># Automatically declares x as numeric</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(<span class="dv">2</span>) <span class="co"># Declares y as an integer </span></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a>x </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a>y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(x) <span class="co"># Check it out</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "double"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(y) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "integer"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "integer"</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.numeric</span>(x) <span class="co"># Check if x is numeric</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.numeric</span>(y) <span class="co"># Check if y is numeric</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.integer</span>(x) <span class="co"># Check if x is an integer</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.integer</span>(y) <span class="co"># Check if y is an integer</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</section>
<section id="character-data" class="level4">
<h4 class="anchored" data-anchor-id="character-data">Character Data</h4>
<p>Note: characters are case sensitive</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="st">"Alberto"</span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Alberto"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(x) <span class="co"># Check it out</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.numeric</span>(x) <span class="co"># Check that x is NOT numeric</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.character</span>(x) <span class="co"># Check that x is character</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nchar</span>(x) <span class="co"># Number of characters in the value of x</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7</code></pre>
</div>
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nchar</span>(<span class="st">"Alberto"</span>) <span class="co"># Number of characters in the literal text "Alberto"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7</code></pre>
</div>
</div>
</section>
<section id="date-data" class="level4">
<h4 class="anchored" data-anchor-id="date-data">Date Data</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2016-10-20"</span>) <span class="co"># Converts a text string into a date value</span></span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Note that the word "Date" is capitalized</span></span>
<span id="cb127-3"><a href="#cb127-3" aria-hidden="true" tabindex="-1"></a>x <span class="co"># Check it out</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2016-10-20"</code></pre>
</div>
</div>
<p>Also note the date format is YYYY/MM/DD, which can be changed as follows:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"10/20/2016"</span>, <span class="st">"%m/%d/%Y"</span>) <span class="co"># Use upper case %Y for 4-digit years</span></span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a>x <span class="co"># Check it out</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2016-10-20"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"10/20/16"</span>, <span class="st">"%m/%d/%y"</span>) <span class="co"># Use lower case %y for 2-digit years</span></span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a>x <span class="co"># Check it out</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2016-10-20"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(x) <span class="co"># Check it out</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Date"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(x) <span class="co"># Note that dates are stored internally as numbers</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "double"</code></pre>
</div>
</div>
<p>Note: you can use other date formats with: %a abbreviated weekday; %A weekday; %b abbreviated month; %B month.</p>
<p>Also, you can use the as.POSIXct() function to read date and time:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">as.POSIXct</span>(<span class="st">"2016-10-20 17:30"</span>) <span class="co"># Note that a space is needed after :</span></span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a>x <span class="co"># Check it out</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2016-10-20 17:30:00 EDT"</code></pre>
</div>
</div>
<p>You can subtract dates and add days to a date:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a>born <span class="ot">&lt;-</span> <span class="fu">as.Date</span>(<span class="st">"2000/2/12"</span>)</span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a>born <span class="co"># Check it out</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2000-02-12"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a>today <span class="ot">&lt;-</span> <span class="fu">Sys.Date</span>()</span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a>today <span class="co"># Check it out</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2024-01-05"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a>aWeekAgo <span class="ot">&lt;-</span> today <span class="sc">-</span> <span class="dv">7</span></span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a>aWeekAgo</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2023-12-29"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a>aWeekFromNow <span class="ot">&lt;-</span> today <span class="sc">+</span> <span class="dv">7</span></span>
<span id="cb145-2"><a href="#cb145-2" aria-hidden="true" tabindex="-1"></a>aWeekFromNow</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2024-01-12"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a>ageInDays <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(today <span class="sc">-</span> born) <span class="co"># Need to convert to numeric</span></span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a>ageInDays</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8728</code></pre>
</div>
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a>age <span class="ot">&lt;-</span> <span class="fu">floor</span>(ageInDays <span class="sc">/</span> <span class="dv">360</span>) <span class="co"># The floor() function rounds down decimals</span></span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a>age</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 24</code></pre>
</div>
</div>
</section>
<section id="logical-data" class="level4">
<h4 class="anchored" data-anchor-id="logical-data">Logical Data</h4>
<p>Logical variables can be either TRUE or FALSE. Numerically, TRUE is identical to 1 and FALSE to 0. Logical variables and values are important to evaluate conditions</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a>TodayIsMyBirthday <span class="ot">&lt;-</span> F <span class="co"># Can use FALSE instead of F</span></span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(TodayIsMyBirthday)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "logical"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(TodayIsMyBirthday)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "logical"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="fu">is.logical</span>(TodayIsMyBirthday)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="sc">==</span> <span class="dv">3</span> <span class="co"># The double == is used to evaluate if two values are equal</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="sc">!=</span> <span class="dv">3</span> <span class="co"># Evaluate if 2 is not (!) equal to 3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span> <span class="sc">&lt;</span> <span class="dv">3</span> <span class="co"># Evaluate if 2 is smaller than 3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</section>
<section id="factor-data" class="level4">
<h4 class="anchored" data-anchor-id="factor-data">Factor Data</h4>
<p>Text is difficult to process quantitatively without some transformation.</p>
<p>A factor is a special type of text data, which is like a category, but unlike free text, factors have a fixed number of unique values that repeat throughout the data.</p>
<p>Understanding factor variables is key in understanding regression models with categorical data and classification models (e.g., logistic regression) which predict the likely classification of an observation.</p>
<p>For example, house location types. Say, if there are 3 types of house locations: Rural, Urban and Suburban, we can create a factor for this data that finds the unique factors (i.e., text values) to categorize houses by location type. The factor conversion also assigns a number to each category, so that you can process things quantitatively. Take this text string vector:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Rural"</span>, <span class="st">"Urban"</span>, </span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a>       <span class="st">"Suburban"</span>, <span class="st">"Urban"</span>,</span>
<span id="cb163-3"><a href="#cb163-3" aria-hidden="true" tabindex="-1"></a>       <span class="st">"Urban"</span>, <span class="st">"Suburban"</span>)</span>
<span id="cb163-4"><a href="#cb163-4" aria-hidden="true" tabindex="-1"></a>x <span class="co"># Notice that Urban and suburban are repeated, as you would expect</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Rural"    "Urban"    "Suburban" "Urban"    "Urban"    "Suburban"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(x) <span class="co"># Now, Convert x into a factor variable</span></span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true" tabindex="-1"></a>y <span class="co"># Check out the 3 factors extracted out of x</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] Rural    Urban    Suburban Urban    Urban    Suburban
Levels: Rural Suburban Urban</code></pre>
</div>
<div class="sourceCode cell-code" id="cb167"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="fu">levels</span>(y) <span class="co"># Display the unique categories in the data</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Rural"    "Suburban" "Urban"   </code></pre>
</div>
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="fu">as.numeric</span>(y) <span class="co"># Check the unique number assigned to each factor</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 3 2 3 3 2</code></pre>
</div>
</div>
</section>
</section>
<section id="complex-data-structures" class="level3">
<h3 class="anchored" data-anchor-id="complex-data-structures">Complex Data Structures</h3>
<p>R is very rich on data structures. The simple variables and data types discussed above are simple data structures. But there are more complex data structures like vectors, matrices, data frames and lists, which give R a lot of power for data manipulation. Understanding how these data structures work is key to unleashing the power of R for data analysis.</p>
<section id="vectors" class="level4">
<h4 class="anchored" data-anchor-id="vectors">Vectors</h4>
<p>A vector is simply a list of values, but all values must be of the same type (e.g., character, numeric, date, etc.)</p>
<p>R is said to be a <strong>“vectorized”</strong> language, meaning that many values are stored in vectors and that R has many convenient features to manipulate data contained in these vectors.</p>
<p>The Popular <code>c()</code> function is the vector <strong>constructor</strong> function. The <strong>c</strong> means to <strong>construct</strong> or **create” a vector with the values supplied. Vectors are convenient ways to store groups of values of the same type (e.g., coefficients, residuals, predictions, etc.)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">2</span>)</span>
<span id="cb171-2"><a href="#cb171-2" aria-hidden="true" tabindex="-1"></a>x <span class="co"># Notice that all values are numeric</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb173"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb175"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="fu">typeof</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "double"</code></pre>
</div>
</div>
<p>R tries coerces data to be of a given type when values are incompatible. For example, if you try to create a vector with a number and a character, R corrects this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb177"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="st">"al"</span>)</span>
<span id="cb177-2"><a href="#cb177-2" aria-hidden="true" tabindex="-1"></a>z</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1"  "al"</code></pre>
</div>
</div>
<p>Notice that “1” above is converted to character to be compatible with “al”</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb179"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">6</span>, <span class="dv">3</span>, <span class="dv">5</span>)</span>
<span id="cb179-2"><a href="#cb179-2" aria-hidden="true" tabindex="-1"></a>x <span class="co"># Check it out</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 2 6 3 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb181"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">4</span>] <span class="co"># 4th element of the vector</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
</div>
<p>A negative index removes an element from the vector</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb183"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> x[<span class="sc">-</span><span class="dv">4</span>] </span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true" tabindex="-1"></a>x <span class="co"># The 4th vector element got removed</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 6 3 5</code></pre>
</div>
</div>
<p>One of the nice things about R vectors is that we can manipulate all the values in a vector with a simple command. For example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb185"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> x <span class="sc">*</span> <span class="dv">3</span> <span class="co"># Multiplies every value of the x vector by 3</span></span>
<span id="cb185-2"><a href="#cb185-2" aria-hidden="true" tabindex="-1"></a>y <span class="co"># Check it out</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  3  6  9 18  9 15</code></pre>
</div>
</div>
<p>Vectors can also hold text values (need to enclose the text in quotes)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb187"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span> (<span class="st">"ITEC 610"</span>, <span class="st">"ITEC 620"</span>, <span class="st">"ITEC 621"</span>)</span>
<span id="cb187-2"><a href="#cb187-2" aria-hidden="true" tabindex="-1"></a>x <span class="co"># Try it</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "ITEC 610" "ITEC 620" "ITEC 621"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb189"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a>x[<span class="dv">3</span>] <span class="co"># Try it</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "ITEC 621"</code></pre>
</div>
</div>
<p>You can also give names to each vector element, in 2 ways</p>
<p>Directly:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb191"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="at">fname =</span> <span class="st">"Alberto"</span>, </span>
<span id="cb191-2"><a href="#cb191-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">lname =</span> <span class="st">"Espinosa"</span>, </span>
<span id="cb191-3"><a href="#cb191-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">"Professor"</span>)</span>
<span id="cb191-4"><a href="#cb191-4" aria-hidden="true" tabindex="-1"></a>x <span class="co"># Check it out</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      fname       lname       title 
  "Alberto"  "Espinosa" "Professor" </code></pre>
</div>
</div>
<p>Or with the <code>names()</code> function</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb193"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Alberto"</span>, </span>
<span id="cb193-2"><a href="#cb193-2" aria-hidden="true" tabindex="-1"></a>       <span class="st">"Espinosa"</span>, </span>
<span id="cb193-3"><a href="#cb193-3" aria-hidden="true" tabindex="-1"></a>       <span class="st">"Professor"</span>)</span>
<span id="cb193-4"><a href="#cb193-4" aria-hidden="true" tabindex="-1"></a>x <span class="co"># Check it out</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Alberto"   "Espinosa"  "Professor"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb195"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(x) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"fname"</span>, </span>
<span id="cb195-2"><a href="#cb195-2" aria-hidden="true" tabindex="-1"></a>              <span class="st">"lname"</span>, </span>
<span id="cb195-3"><a href="#cb195-3" aria-hidden="true" tabindex="-1"></a>              <span class="st">"title"</span>)</span>
<span id="cb195-4"><a href="#cb195-4" aria-hidden="true" tabindex="-1"></a>x <span class="co"># Check it out</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      fname       lname       title 
  "Alberto"  "Espinosa" "Professor" </code></pre>
</div>
</div>
</section>
<section id="data-frames" class="level4">
<h4 class="anchored" data-anchor-id="data-frames">Data Frames</h4>
<p>Data frames are fundamental to understanding how to access and manipulate data in R. The easiest way to understand a data frame is to think of it as an Excel sheet with various columns each with a column name (or think of it as a database table).</p>
<p>Another way to think of it is as table composed of vectors. That is, columns can contain different data types. But the data in one column has to be of one type (i.e., a vector)</p>
<p><code>$</code> is NOT money in a data frame, but it is how you extract a vector column from a data frame table. For example, a column named LastName in a data frame called Employees can be accessed using this name: “Employees$LastName” (note: in MS Access we would access this column with Employees.LastName)</p>
<p>Also, every row and column in a data frame is <strong>“indexed”</strong>. It is very important to understand the use of indices in R for data manipulation. For example, say you have a data frame named <strong>Employees</strong> with multiple columns holding employee data. You can use the following bracketed indices to access the data you need:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb197"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a>Employees[<span class="dv">1</span>, ] <span class="sc">--</span> First <span class="fu">row</span> (all columns) </span>
<span id="cb197-2"><a href="#cb197-2" aria-hidden="true" tabindex="-1"></a>Employees[, <span class="dv">1</span>] <span class="sc">--</span> First <span class="fu">column</span> (all rows)</span>
<span id="cb197-3"><a href="#cb197-3" aria-hidden="true" tabindex="-1"></a>Employees[<span class="dv">2</span>, <span class="dv">3</span>] <span class="sc">--</span> Element <span class="cf">in</span> 2nd row and 3rd column</span>
<span id="cb197-4"><a href="#cb197-4" aria-hidden="true" tabindex="-1"></a>Employees[<span class="dv">3</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">2</span><span class="sc">:</span><span class="dv">4</span>] <span class="sc">--</span> Rows <span class="dv">3</span> through <span class="dv">10</span> from columns <span class="dv">2</span> throgh <span class="dv">4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>IMPORTANT:</strong> a thorough understanding of data frame and vector indices is key to understanding sub-sampling, cross-validation and machine learning. Try to understand this well.</p>
<p>Let’s practice with indices. First create a vector that will have the row indices for a data frame we will create shortly called MyDataFrame We will call this vector MyIndex (be careful with the capitalization)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb198"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a>MyIndex <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">8</span> <span class="co"># Creates the MyIndex vector with values 1 to 8</span></span>
<span id="cb198-2"><a href="#cb198-2" aria-hidden="true" tabindex="-1"></a>MyIndex <span class="co"># Check it out</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5 6 7 8</code></pre>
</div>
</div>
<p>Now let’s create a vector with 8 course numbers</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb200"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a>courses <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"ITEC 610"</span>, <span class="st">"ITEC 616"</span>, </span>
<span id="cb200-2"><a href="#cb200-2" aria-hidden="true" tabindex="-1"></a>             <span class="st">"ITEC 620"</span>, <span class="st">"ITEC 621"</span>, </span>
<span id="cb200-3"><a href="#cb200-3" aria-hidden="true" tabindex="-1"></a>             <span class="st">"ITEC 660"</span>, <span class="st">"ITEC 670"</span>, </span>
<span id="cb200-4"><a href="#cb200-4" aria-hidden="true" tabindex="-1"></a>             <span class="st">"KSB 620"</span>, <span class="st">"KSB 621"</span>)</span>
<span id="cb200-5"><a href="#cb200-5" aria-hidden="true" tabindex="-1"></a>courses <span class="co"># Check it out</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "ITEC 610" "ITEC 616" "ITEC 620" "ITEC 621" "ITEC 660" "ITEC 670" "KSB 620" 
[8] "KSB 621" </code></pre>
</div>
</div>
<p>Now let’s create a vector with the pre-requisites for these 8 courses</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb202"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true" tabindex="-1"></a>prereqs <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"None"</span>, <span class="st">"None"</span>, </span>
<span id="cb202-2"><a href="#cb202-2" aria-hidden="true" tabindex="-1"></a>             <span class="st">"ITEC 610"</span>, <span class="st">"ITEC 620"</span>, </span>
<span id="cb202-3"><a href="#cb202-3" aria-hidden="true" tabindex="-1"></a>             <span class="st">"ITEC 610"</span>, <span class="st">"KSB 065"</span>, </span>
<span id="cb202-4"><a href="#cb202-4" aria-hidden="true" tabindex="-1"></a>             <span class="st">"ITEC 620"</span>, <span class="st">"ITEC 621"</span>)</span>
<span id="cb202-5"><a href="#cb202-5" aria-hidden="true" tabindex="-1"></a>prereqs <span class="co"># Check it out</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "None"     "None"     "ITEC 610" "ITEC 620" "ITEC 610" "KSB 065"  "ITEC 620"
[8] "ITEC 621"</code></pre>
</div>
</div>
<p>Now let’s create a data frame with indices, courses and prerequites:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb204"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb204-1"><a href="#cb204-1" aria-hidden="true" tabindex="-1"></a>MyDataFrame <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(MyIndex, </span>
<span id="cb204-2"><a href="#cb204-2" aria-hidden="true" tabindex="-1"></a>                          courses, </span>
<span id="cb204-3"><a href="#cb204-3" aria-hidden="true" tabindex="-1"></a>                          prereqs)</span>
<span id="cb204-4"><a href="#cb204-4" aria-hidden="true" tabindex="-1"></a>MyDataFrame <span class="co"># Check it out</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  MyIndex  courses  prereqs
1       1 ITEC 610     None
2       2 ITEC 616     None
3       3 ITEC 620 ITEC 610
4       4 ITEC 621 ITEC 620
5       5 ITEC 660 ITEC 610
6       6 ITEC 670  KSB 065
7       7  KSB 620 ITEC 620
8       8  KSB 621 ITEC 621</code></pre>
</div>
</div>
<p>Now you can use the <code>$</code> symbol after the data frame to reference a single column</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb206"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true" tabindex="-1"></a>MyDataFrame<span class="sc">$</span>courses</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "ITEC 610" "ITEC 616" "ITEC 620" "ITEC 621" "ITEC 660" "ITEC 670" "KSB 620" 
[8] "KSB 621" </code></pre>
</div>
</div>
<p>Lets look at just part of the data frame</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb208"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb208-1"><a href="#cb208-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(MyDataFrame) <span class="co"># Display the first few rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  MyIndex  courses  prereqs
1       1 ITEC 610     None
2       2 ITEC 616     None
3       3 ITEC 620 ITEC 610
4       4 ITEC 621 ITEC 620
5       5 ITEC 660 ITEC 610
6       6 ITEC 670  KSB 065</code></pre>
</div>
<div class="sourceCode cell-code" id="cb210"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb210-1"><a href="#cb210-1" aria-hidden="true" tabindex="-1"></a><span class="fu">tail</span>(MyDataFrame) <span class="co"># Display the last few rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  MyIndex  courses  prereqs
3       3 ITEC 620 ITEC 610
4       4 ITEC 621 ITEC 620
5       5 ITEC 660 ITEC 610
6       6 ITEC 670  KSB 065
7       7  KSB 620 ITEC 620
8       8  KSB 621 ITEC 621</code></pre>
</div>
<div class="sourceCode cell-code" id="cb212"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb212-1"><a href="#cb212-1" aria-hidden="true" tabindex="-1"></a>MyDataFrame[<span class="dv">2</span>, <span class="fu">c</span>(<span class="st">"courses"</span>, <span class="st">"prereqs"</span>)] <span class="co"># To list selected columns for row 2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   courses prereqs
2 ITEC 616    None</code></pre>
</div>
<div class="sourceCode cell-code" id="cb214"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb214-1"><a href="#cb214-1" aria-hidden="true" tabindex="-1"></a>MyDataFrame[, <span class="fu">c</span>(<span class="st">"courses"</span>, <span class="st">"prereqs"</span>)] <span class="co"># To list selected columns for all rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   courses  prereqs
1 ITEC 610     None
2 ITEC 616     None
3 ITEC 620 ITEC 610
4 ITEC 621 ITEC 620
5 ITEC 660 ITEC 610
6 ITEC 670  KSB 065
7  KSB 620 ITEC 620
8  KSB 621 ITEC 621</code></pre>
</div>
</div>
</section>
<section id="matrices" class="level4">
<h4 class="anchored" data-anchor-id="matrices">Matrices</h4>
<p>A matrix is similar to a data frame in most respects (i.e., a table with values), except that all values must be of the same type in the entire matrix. Most often matrices contain only quantitative values, which can be easily manipulated with matrix algebra.</p>
<p>Matrices are important in R because some statistical routines, like some correlation functions” only work with quantitative matrices. This is how you create a matrix with 10 elements organized into 5 rows (i.e., the matrix has 2 columns, so it is a 5x2 matrix):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb216"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb216-1"><a href="#cb216-1" aria-hidden="true" tabindex="-1"></a>x.mat <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">nrow =</span> <span class="dv">5</span>)</span>
<span id="cb216-2"><a href="#cb216-2" aria-hidden="true" tabindex="-1"></a>x.mat <span class="co"># Check it out</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2]
[1,]    1    6
[2,]    2    7
[3,]    3    8
[4,]    4    9
[5,]    5   10</code></pre>
</div>
</div>
<p>You could also accomplish the same thing with:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb218"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb218-1"><a href="#cb218-1" aria-hidden="true" tabindex="-1"></a>x.mat <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="at">ncol =</span> <span class="dv">2</span>)</span>
<span id="cb218-2"><a href="#cb218-2" aria-hidden="true" tabindex="-1"></a>x.mat <span class="co"># Check it out</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2]
[1,]    1    6
[2,]    2    7
[3,]    3    8
[4,]    4    9
[5,]    5   10</code></pre>
</div>
</div>
<p>You can name the columns and rows of matrices:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb220"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb220-1"><a href="#cb220-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(x.mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Ref No."</span>, <span class="st">"Sales"</span>)</span>
<span id="cb220-2"><a href="#cb220-2" aria-hidden="true" tabindex="-1"></a><span class="fu">rownames</span>(x.mat) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"John"</span>, <span class="st">"Judy"</span>, <span class="st">"Sally"</span>, <span class="st">"Moe"</span>, <span class="st">"Maria"</span>)</span>
<span id="cb220-3"><a href="#cb220-3" aria-hidden="true" tabindex="-1"></a>x.mat</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      Ref No. Sales
John        1     6
Judy        2     7
Sally       3     8
Moe         4     9
Maria       5    10</code></pre>
</div>
</div>
</section>
<section id="lists" class="level4">
<h4 class="anchored" data-anchor-id="lists">Lists</h4>
<p>A list is similar to a vector but it can contain data of different types. Vectors can be used to create columns in data frames (i.e.&nbsp;tables), lists cannot</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb222"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb222-1"><a href="#cb222-1" aria-hidden="true" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">name =</span> <span class="st">"Alberto"</span>, </span>
<span id="cb222-2"><a href="#cb222-2" aria-hidden="true" tabindex="-1"></a>          <span class="at">title =</span> <span class="st">"Professor"</span>, </span>
<span id="cb222-3"><a href="#cb222-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">age =</span> <span class="dv">16</span>)</span>
<span id="cb222-4"><a href="#cb222-4" aria-hidden="true" tabindex="-1"></a>y <span class="co"># Check it out -- the data types are preserved</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$name
[1] "Alberto"

$title
[1] "Professor"

$age
[1] 16</code></pre>
</div>
</div>
<p>A list can be quite complex because its elements can be anything, that is, single values, vectors, other lists. For example (notice that we have name lists inside of a list):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb224"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb224-1"><a href="#cb224-1" aria-hidden="true" tabindex="-1"></a>friends <span class="ot">&lt;-</span> <span class="fu">list</span>(<span class="at">MyName =</span> <span class="st">"Alberto"</span>, </span>
<span id="cb224-2"><a href="#cb224-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">MyAge =</span> <span class="dv">15</span>, </span>
<span id="cb224-3"><a href="#cb224-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">Charlie =</span> <span class="fu">list</span>(<span class="at">age =</span> <span class="dv">20</span>, <span class="at">major =</span> <span class="st">"Analytics"</span>), </span>
<span id="cb224-4"><a href="#cb224-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">John =</span> <span class="fu">list</span>(<span class="at">age =</span> <span class="dv">30</span>, <span class="at">job =</span> <span class="st">"Programmer"</span>), </span>
<span id="cb224-5"><a href="#cb224-5" aria-hidden="true" tabindex="-1"></a>                <span class="at">Dan =</span> <span class="fu">list</span>(<span class="at">age =</span> <span class="dv">40</span>, <span class="at">profession =</span> <span class="st">"Lawyer"</span>), </span>
<span id="cb224-6"><a href="#cb224-6" aria-hidden="true" tabindex="-1"></a>                <span class="at">Others =</span> <span class="fu">c</span>(<span class="st">"Joe"</span>, <span class="st">"Moe"</span>, <span class="st">"Doe"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You can extract distinct elements from a list with the $ or [[]]</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb225"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb225-1"><a href="#cb225-1" aria-hidden="true" tabindex="-1"></a>friends <span class="co"># Check it out</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$MyName
[1] "Alberto"

$MyAge
[1] 15

$Charlie
$Charlie$age
[1] 20

$Charlie$major
[1] "Analytics"


$John
$John$age
[1] 30

$John$job
[1] "Programmer"


$Dan
$Dan$age
[1] 40

$Dan$profession
[1] "Lawyer"


$Others
[1] "Joe" "Moe" "Doe"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb227"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb227-1"><a href="#cb227-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(friends) <span class="co"># Inspect it</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>List of 6
 $ MyName : chr "Alberto"
 $ MyAge  : num 15
 $ Charlie:List of 2
  ..$ age  : num 20
  ..$ major: chr "Analytics"
 $ John   :List of 2
  ..$ age: num 30
  ..$ job: chr "Programmer"
 $ Dan    :List of 2
  ..$ age       : num 40
  ..$ profession: chr "Lawyer"
 $ Others : chr [1:3] "Joe" "Moe" "Doe"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb229"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb229-1"><a href="#cb229-1" aria-hidden="true" tabindex="-1"></a>friends<span class="sc">$</span>John <span class="co"># Let's get all the data for John</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$age
[1] 30

$job
[1] "Programmer"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb231"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb231-1"><a href="#cb231-1" aria-hidden="true" tabindex="-1"></a>friends<span class="sc">$</span>John<span class="sc">$</span>job <span class="co"># Let's get John's job</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Programmer"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb233"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb233-1"><a href="#cb233-1" aria-hidden="true" tabindex="-1"></a>friends[[<span class="st">"John"</span>]]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$age
[1] 30

$job
[1] "Programmer"</code></pre>
</div>
</div>
</section>
<section id="data-reshaping" class="level4">
<h4 class="anchored" data-anchor-id="data-reshaping">Data Reshaping</h4>
<p>If you have various columns (i.e., vectors) of data of the same type and you would like to combine them into a matrix you can use the “cbind()” function. Notice below how all the values are automatically converted to text because MyIndex values cannot be numbers – all elements in a matrix must be of the same type.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb235"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb235-1"><a href="#cb235-1" aria-hidden="true" tabindex="-1"></a>My.Matrix <span class="ot">&lt;-</span> <span class="fu">cbind</span>(MyIndex, </span>
<span id="cb235-2"><a href="#cb235-2" aria-hidden="true" tabindex="-1"></a>                   courses, </span>
<span id="cb235-3"><a href="#cb235-3" aria-hidden="true" tabindex="-1"></a>                   prereqs)</span>
<span id="cb235-4"><a href="#cb235-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb235-5"><a href="#cb235-5" aria-hidden="true" tabindex="-1"></a>My.Matrix</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     MyIndex courses    prereqs   
[1,] "1"     "ITEC 610" "None"    
[2,] "2"     "ITEC 616" "None"    
[3,] "3"     "ITEC 620" "ITEC 610"
[4,] "4"     "ITEC 621" "ITEC 620"
[5,] "5"     "ITEC 660" "ITEC 610"
[6,] "6"     "ITEC 670" "KSB 065" 
[7,] "7"     "KSB 620"  "ITEC 620"
[8,] "8"     "KSB 621"  "ITEC 621"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb237"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb237-1"><a href="#cb237-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(My.Matrix)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "matrix" "array" </code></pre>
</div>
</div>
<p>Or, if you would like to combine the vectors into a data.frame, you can use the data.frame(). Notice how all the values can now be of different types</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb239"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb239-1"><a href="#cb239-1" aria-hidden="true" tabindex="-1"></a>My.DataFrame <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(MyIndex, </span>
<span id="cb239-2"><a href="#cb239-2" aria-hidden="true" tabindex="-1"></a>                           courses, </span>
<span id="cb239-3"><a href="#cb239-3" aria-hidden="true" tabindex="-1"></a>                           prereqs)</span>
<span id="cb239-4"><a href="#cb239-4" aria-hidden="true" tabindex="-1"></a>My.DataFrame</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  MyIndex  courses  prereqs
1       1 ITEC 610     None
2       2 ITEC 616     None
3       3 ITEC 620 ITEC 610
4       4 ITEC 621 ITEC 620
5       5 ITEC 660 ITEC 610
6       6 ITEC 670  KSB 065
7       7  KSB 620 ITEC 620
8       8  KSB 621 ITEC 621</code></pre>
</div>
<div class="sourceCode cell-code" id="cb241"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb241-1"><a href="#cb241-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(My.DataFrame)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "data.frame"</code></pre>
</div>
</div>
</section>
<section id="subsampling" class="level4">
<h4 class="anchored" data-anchor-id="subsampling">Subsampling</h4>
<p>The concept of sub-sampling is <strong>CENTRAL</strong> TO <strong>Cross-Validation</strong> and <strong>Machine Learning</strong>.</p>
<p>Note: we will discuss this in more depth later on, but here is some R code to get you thinking about machine learning</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb243"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb243-1"><a href="#cb243-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(MASS) <span class="co"># Contains the Boston housing data set</span></span>
<span id="cb243-2"><a href="#cb243-2" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(Boston) <span class="co"># This function counts the total rows in the Boston dataset = 506</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 506</code></pre>
</div>
</div>
<p>The next function <code>set.seed()</code> sets the first number of the random number generator. If you remember the random number tables in old statistics book, they contain a long sequence of random numbers, each between 0 and 1. You can pick the first 100 to get 100 random numbers. But if you re-sample starting with the first value you will get the same 100 values. This is OK if you want a repeatable result for demonstration purposes. But often, when you re-sample you want to get a different set of random numbers. In such a case, you just need to change the random seed. Let’s illustrate this with the random seed set to 1 (i.e., start with the first random number)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb245"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb245-1"><a href="#cb245-1" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now, let’s generate a subset of the Boston data set containing a sub-sample of <strong>70%</strong> of the observations selected randomly. In Machine Learning, we would use this 70% to <strong>train</strong> the model, which we would then <strong>test</strong> with the remaining <strong>30%</strong>. We will cover this in more depth later on, but let’s see how to draw the 70% train sub-sample.</p>
<p>First, let’s create a vector named <strong>train</strong>, which we will use as an <strong>index</strong> vector to select random rows of observations from the data set. In the command below we use the function <code>nrow()</code> to extract the number of rows of data in the Boston data set. We then take the sequence of numbers from 1 to nrow(Boston) (i.e., 1,2,3,,,,506) (i.e., all rows available) and create a random index vector with 70% of these values. We will use this vector will be used later to select 70% of the rows or observations from the Boston data set.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb246"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb246-1"><a href="#cb246-1" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(Boston), </span>
<span id="cb246-2"><a href="#cb246-2" aria-hidden="true" tabindex="-1"></a>                <span class="fl">0.7</span> <span class="sc">*</span> <span class="fu">nrow</span>(Boston))</span>
<span id="cb246-3"><a href="#cb246-3" aria-hidden="true" tabindex="-1"></a>train[<span class="dv">1</span><span class="sc">:</span><span class="dv">100</span>] <span class="co"># Check out the first 100 values in the index vector</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] 505 324 167 129 418 471 299 270 466 187 307 481  85 277 362 438 330 263
 [19] 329  79 213  37 105 217 366 165 290 492 382  89 428 463 289 340 419 326
 [37] 490  42 422 111 404 412  20  44 377 343  70 121  40 172  25 375 248 198
 [55] 378  39 435 298 390 280 160  14 130  45 402  22 206 230 193 371 104 501
 [73] 255 450 436 103 331  13 296 483 176 345 279 110  84 359  29 141 252 406
 [91] 221 465 108 304  33 443 149 287 102 145</code></pre>
</div>
<div class="sourceCode cell-code" id="cb248"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb248-1"><a href="#cb248-1" aria-hidden="true" tabindex="-1"></a><span class="fu">length</span>(train) <span class="co"># 354 (70%) observations in the train data set</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 354</code></pre>
</div>
</div>
<p>Now we can use the index <code>[train, ]</code> to select the 70% training observations from the data set. Let’s draw the subset and store it in a new data frame object named Boston.train:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb250"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb250-1"><a href="#cb250-1" aria-hidden="true" tabindex="-1"></a>Boston.train <span class="ot">&lt;-</span> Boston[train, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note that I used a <code>","</code> in the <code>[train, ]</code> index above. Can you tell why we placed a comma inside the index? It is because <strong>Boston</strong> is a data frame containing rows and columns. An index for a data frame needs to specify the specific row and column to access, separated with a comma. Since <strong>train</strong> is before the comma, it will select all the rows contained in the <strong>train index</strong> vector. Since there is nothing after the comma, it will select all available columns in the data frame. I chose the name <strong>Boston.train</strong> to store this subset for later use.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb251"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb251-1"><a href="#cb251-1" aria-hidden="true" tabindex="-1"></a>Boston.train[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>] <span class="co"># Check out the first 10 row and 6 columns</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        crim zn indus chas   nox    rm
505  0.10959  0 11.93    0 0.573 6.794
324  0.28392  0  7.38    0 0.493 5.708
167  2.01019  0 19.58    0 0.605 7.929
129  0.32543  0 21.89    0 0.624 6.431
418 25.94060  0 18.10    0 0.679 5.304
471  4.34879  0 18.10    0 0.580 6.167
299  0.06466 70  2.24    0 0.400 6.345
270  0.09065 20  6.96    1 0.464 5.920
466  3.16360  0 18.10    0 0.655 5.759
187  0.05602  0  2.46    0 0.488 7.831</code></pre>
</div>
<div class="sourceCode cell-code" id="cb253"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb253-1"><a href="#cb253-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(Boston.train) <span class="co"># Check the number of rows of this subset</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 354</code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="working-with-text" class="level2">
<h2 class="anchored" data-anchor-id="working-with-text">2.8 Working with Text</h2>
<p>The subject of text analytics is outside the scope of this book, but R is very powerful for manipulating text, so I illustrate a few basic functions next.</p>
<p>You can Concatenate text with the <code>paste()</code> function. Note that the default separator in the <code>paste()</code> function is a blank space</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb255"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb255-1"><a href="#cb255-1" aria-hidden="true" tabindex="-1"></a>MyText <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"My"</span>, <span class="st">"Name"</span>, <span class="st">"is"</span>, <span class="st">"Alberto"</span>) <span class="co"># To store it in a variable</span></span>
<span id="cb255-2"><a href="#cb255-2" aria-hidden="true" tabindex="-1"></a>MyText <span class="co"># Note that sub-strings are separated by a blank space by default</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "My Name is Alberto"</code></pre>
</div>
</div>
<p>But you can change the separator with the <code>sep =</code> attribute</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb257"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb257-1"><a href="#cb257-1" aria-hidden="true" tabindex="-1"></a><span class="co"># to change default separator to "-"</span></span>
<span id="cb257-2"><a href="#cb257-2" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">"My"</span>, <span class="st">"Name"</span>, <span class="st">"is"</span>, <span class="st">"Alberto"</span>, <span class="at">sep =</span> <span class="st">"-"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "My-Name-is-Alberto"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb259"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb259-1"><a href="#cb259-1" aria-hidden="true" tabindex="-1"></a><span class="co"># to eliminate the blank space</span></span>
<span id="cb259-2"><a href="#cb259-2" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">"My"</span>, <span class="st">"Name"</span>, <span class="st">"is"</span>, <span class="st">"Alberto"</span>, <span class="at">sep =</span> <span class="st">""</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "MyNameisAlberto"</code></pre>
</div>
</div>
<p>You can also concatenate literal text enclosed in quotes with text contained in variables without quotes:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb261"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb261-1"><a href="#cb261-1" aria-hidden="true" tabindex="-1"></a><span class="co"># To create a variable that contains text</span></span>
<span id="cb261-2"><a href="#cb261-2" aria-hidden="true" tabindex="-1"></a>MyName <span class="ot">&lt;-</span> <span class="st">"Alberto"</span> </span>
<span id="cb261-3"><a href="#cb261-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb261-4"><a href="#cb261-4" aria-hidden="true" tabindex="-1"></a><span class="co"># And another variable</span></span>
<span id="cb261-5"><a href="#cb261-5" aria-hidden="true" tabindex="-1"></a>MyCourse <span class="ot">&lt;-</span> <span class="st">"Predictive Analytics"</span> </span>
<span id="cb261-6"><a href="#cb261-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb261-7"><a href="#cb261-7" aria-hidden="true" tabindex="-1"></a><span class="co"># To embed variables</span></span>
<span id="cb261-8"><a href="#cb261-8" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(<span class="st">"My"</span>, <span class="st">"Name"</span>, <span class="st">"is"</span>, MyName, <span class="st">"and I teach"</span>, MyCourse) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "My Name is Alberto and I teach Predictive Analytics"</code></pre>
</div>
</div>
<p>The <code>sprintf()</code> does the same, but it places variable contents in each instance of <code>%s</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb263"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb263-1"><a href="#cb263-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sprintf</span>(<span class="st">"My Name is %s and I teach %s"</span>, MyName, MyCourse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "My Name is Alberto and I teach Predictive Analytics"</code></pre>
</div>
</div>
<p>In contrast to <code>paste()</code>, the <code>c()</code> function concatenates into a vector</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb265"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb265-1"><a href="#cb265-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Creates a vector with 4 elements</span></span>
<span id="cb265-2"><a href="#cb265-2" aria-hidden="true" tabindex="-1"></a>MyText <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"My"</span>, <span class="st">"Name"</span>, <span class="st">"is"</span>, <span class="st">"Alberto"</span>) </span>
<span id="cb265-3"><a href="#cb265-3" aria-hidden="true" tabindex="-1"></a>MyText</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "My"      "Name"    "is"      "Alberto"</code></pre>
</div>
</div>
<p>Which you can then collapse into a single text string</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb267"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb267-1"><a href="#cb267-1" aria-hidden="true" tabindex="-1"></a><span class="co"># To concatenate into a string with no spaces</span></span>
<span id="cb267-2"><a href="#cb267-2" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(MyText, <span class="at">collapse =</span> <span class="st">""</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "MyNameisAlberto"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb269"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb269-1"><a href="#cb269-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Or with spaces</span></span>
<span id="cb269-2"><a href="#cb269-2" aria-hidden="true" tabindex="-1"></a><span class="fu">paste</span>(MyText, <span class="at">collapse =</span> <span class="st">" "</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "My Name is Alberto"</code></pre>
</div>
</div>
</section>
<section id="functions" class="level2">
<h2 class="anchored" data-anchor-id="functions">2.9 Functions</h2>
<p>Functions can be either <strong>“built-in”</strong> (available in the base package or other installed packages); pre-programmed in packages, or <strong>“user-defined”</strong> (written in your R script)</p>
<section id="built-in-functions" class="level4">
<h4 class="anchored" data-anchor-id="built-in-functions">Built-In Functions</h4>
<p>There are thousands of built in functions in R. Many come in the <strong>{stats}</strong> package and available when you run R and others are available in libraries when you load them. Here are a few examples:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb271"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb271-1"><a href="#cb271-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">6</span>) <span class="co"># Vector constructor function</span></span>
<span id="cb271-2"><a href="#cb271-2" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(x) <span class="co"># Statistical mean function</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3.666667</code></pre>
</div>
</div>
<p>Again, there are many pre-programmed functions in packages. Each package has its own programmed functions, which are at the core of what we do with R packages. For example, the <code>lm()</code> function we used above is a function that fits a linear regression model, which is available in the <strong>{stats}</strong> package.</p>
</section>
<section id="user-defined-functions" class="level4">
<h4 class="anchored" data-anchor-id="user-defined-functions">User-Defined Functions</h4>
<p>Built-in functions didn’t appear out of thin air. Someone programmed them for you to use. But you can also write your own functions. User-defined functions in involve two actions:</p>
<ol type="1">
<li>Creating/defining the function, and then</li>
<li>Invoking (i.e., using) the function when needed</li>
</ol>
<p>You can create any function with the <code>function()</code> function (pardon the redundancy). The steps that the function executes are enclosed within curly brackets <code>{ }</code>. To run a function you have to highlight and execute all the commands (in between <code>{</code> and <code>}</code>) associated with the function, which will load the function commands into memory. Once you do this you can use the function any time until you shut down R.</p>
<p>Some functions require parameters, others don’t. A parameter is a variable in the function, which requires that we pass one or more values (one for each parameter) to the function, which the function then uses to calculate something.</p>
<p>For example, <code>ls()</code> is a built-in function that lists all active objects and does not require parameters. In contrast, <code>mean(x)</code> is a function that that requires a vector x as a parameter, which the function will use to compute a mean of all the elements in the vector. Other functions like <code>data()</code> can be used without parameters (to view all data sets available in the environment) or with parameters like <code>data(package = "ISLR")</code> (to view the data set in a specific package).</p>
<p>Let’s create a simple function that displays “This is my R World!!” We will call this function <code>MyWorld()</code> and will not require any parameters – i.e., we don’t need to pass any data inside the parentheses.</p>
<p>We first create the function and place the respective instructions within curly brackets <code>{ }</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb273"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb273-1"><a href="#cb273-1" aria-hidden="true" tabindex="-1"></a>MyWorld <span class="ot">&lt;-</span> <span class="cf">function</span>() <span class="co"># No parameters/arguments</span></span>
<span id="cb273-2"><a href="#cb273-2" aria-hidden="true" tabindex="-1"></a>{<span class="fu">print</span>(<span class="st">"This is my R World!!"</span>)}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now that we have defined the function <code>MyWorld()</code>, highlight all the command lines from <code>MyWorld</code> all the way to the ending curly bracket. This will cause the function to load into your environment and be ready to use any time until you exit R. Notice that nothing is printed in the output. This is because we are not telling R to print anything yet. We are just defining what the function will do. Once you run the function, it will execute the print command.</p>
<p>Now you can run the function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb274"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb274-1"><a href="#cb274-1" aria-hidden="true" tabindex="-1"></a><span class="fu">MyWorld</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "This is my R World!!"</code></pre>
</div>
</div>
<p>Once a function is created and executed, it is available for use until you terminate the R session</p>
<p>Now let’s write a function with parameters/arguments. Let’s suppose what you want to custom tailor the <code>MyWorld()</code> function to be anyone’s world. This means that you have to pass the world owner’s name to the function. We need to write a new function that will accept one parameter. Let’s call it <code>AnyonesWorld()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb276"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb276-1"><a href="#cb276-1" aria-hidden="true" tabindex="-1"></a>AnyonesWorld <span class="ot">&lt;-</span> <span class="cf">function</span>(who) <span class="co"># "who" is the parameter</span></span>
<span id="cb276-2"><a href="#cb276-2" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb276-3"><a href="#cb276-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"This is "</span>, who, <span class="st">"'s R World"</span>, <span class="at">sep =</span> <span class="st">""</span>))</span>
<span id="cb276-4"><a href="#cb276-4" aria-hidden="true" tabindex="-1"></a>  }  </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Notice a few things above. First, we put the curly brackets in separate lines. It really doesn’t matter as long as all the function commands are in between the brackets. But many programmers like to do this to make the function code easy to spot in the script. Also, not that we specified <strong>who</strong> as the parameter for this function. So whatever name we input when we invoke the function will be replaced in the code any time the parameter <strong>who</strong> is invoked.</p>
<p>Now let’s execute the function but enter who’s world it is (we have a few)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb277"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb277-1"><a href="#cb277-1" aria-hidden="true" tabindex="-1"></a><span class="fu">AnyonesWorld</span>(<span class="st">"Alberto"</span>) <span class="co"># Requires that we enter an argument</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "This is Alberto's R World"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb279"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb279-1"><a href="#cb279-1" aria-hidden="true" tabindex="-1"></a><span class="fu">AnyonesWorld</span>(<span class="st">"Joe"</span>) <span class="co"># Try any name you wish</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "This is Joe's R World"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb281"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb281-1"><a href="#cb281-1" aria-hidden="true" tabindex="-1"></a><span class="fu">AnyonesWorld</span>(<span class="st">"Sally"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "This is Sally's R World"</code></pre>
</div>
</div>
<p>Functions are useful when you need to do complex calculations and return the results. For example to write a function that will return the squared value of a number x, we make x the parameter and then specify what we want to return, i.e., it’s squared value</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb283"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb283-1"><a href="#cb283-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Whatever we enter in SquareMe(x) will be squared</span></span>
<span id="cb283-2"><a href="#cb283-2" aria-hidden="true" tabindex="-1"></a>SquareMe <span class="ot">&lt;-</span> <span class="cf">function</span>(x) </span>
<span id="cb283-3"><a href="#cb283-3" aria-hidden="true" tabindex="-1"></a>{<span class="fu">return</span>(x<span class="sc">^</span><span class="dv">2</span>)}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now run the function definition above and then invoke the function below to see how it works:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb284"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb284-1"><a href="#cb284-1" aria-hidden="true" tabindex="-1"></a><span class="fu">SquareMe</span>(<span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 16</code></pre>
</div>
</div>
<p>Note: the function above is a simple illustration in which the function fits in one line. Typically, functions span many lines, in which case it is customary, for readability, to put the open and closing curly brackets in separate lines, For example, let’s create a function: that takes a value, then adds 2 and then squares this sum</p>
<p>x is a parameter we are passing to the function. Here is another example. Let’s say that we want to take a value, square it and then add 2 to it”</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb286"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb286-1"><a href="#cb286-1" aria-hidden="true" tabindex="-1"></a>SquareMePlus2 <span class="ot">&lt;-</span> <span class="cf">function</span>(x) </span>
<span id="cb286-2"><a href="#cb286-2" aria-hidden="true" tabindex="-1"></a>  {</span>
<span id="cb286-3"><a href="#cb286-3" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;-</span> (x <span class="sc">^</span> <span class="dv">2</span>) <span class="sc">+</span> <span class="dv">2</span></span>
<span id="cb286-4"><a href="#cb286-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(y)</span>
<span id="cb286-5"><a href="#cb286-5" aria-hidden="true" tabindex="-1"></a>  } </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now run the function commands above and then invoke the function as follows:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb287"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb287-1"><a href="#cb287-1" aria-hidden="true" tabindex="-1"></a><span class="fu">SquareMePlus2</span>(<span class="dv">4</span>) <span class="co"># i.e., (4 ^ 2) + 2 = 18</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 18</code></pre>
</div>
</div>
</section>
</section>
<section id="program-control-ifs" class="level2">
<h2 class="anchored" data-anchor-id="program-control-ifs">2.10 Program Control: If’s</h2>
<p>Most R scripts for this course will simply have a “stack” of commands that will execute sequentially. You can execute command stacks in full by highlighting the respective lines and then Ctrl-Enter or one line at a time. However, there will be times when you want to execute some lines only if some condition is met, or there may be times when you want to execute some lines multiple times in a loop. This is called “conditional logic” in software programming. In such cases, you will need to understand how to control the program execution sequence (i.e., logic). There are several types of program controls, but the most common ones are: if/else’s and loops.</p>
<section id="ifelse" class="level3">
<h3 class="anchored" data-anchor-id="ifelse">if/else</h3>
<p>Example, change the value of MyValue below to see how the if control works</p>
<ol type="1">
<li>the <strong>if</strong> condition must be inside the curly brackets</li>
<li>the <strong>else</strong> condition too; IMPORTANT: the “else” statement must be in the same line as the closing bracket } of the first condition or the command will fail</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb289"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb289-1"><a href="#cb289-1" aria-hidden="true" tabindex="-1"></a>MyValue <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb289-2"><a href="#cb289-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (MyValue <span class="sc">&gt;</span> <span class="dv">10</span>) </span>
<span id="cb289-3"><a href="#cb289-3" aria-hidden="true" tabindex="-1"></a>  {<span class="fu">print</span>(<span class="st">"Your number is large"</span>)} <span class="cf">else</span></span>
<span id="cb289-4"><a href="#cb289-4" aria-hidden="true" tabindex="-1"></a>  {<span class="fu">print</span>(<span class="st">"Your number is small"</span>)}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Your number is small"</code></pre>
</div>
</div>
<p>You can also use the <code>ifelse()</code> which works like IF functions f in Excel</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb291"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb291-1"><a href="#cb291-1" aria-hidden="true" tabindex="-1"></a>MyValue <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb291-2"><a href="#cb291-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ifelse</span>(MyValue <span class="sc">&gt;</span> <span class="dv">10</span>, </span>
<span id="cb291-3"><a href="#cb291-3" aria-hidden="true" tabindex="-1"></a>       <span class="st">"Large Number"</span>,  <span class="co"># If true</span></span>
<span id="cb291-4"><a href="#cb291-4" aria-hidden="true" tabindex="-1"></a>       <span class="st">"Small Number"</span>)  <span class="co"># If not true</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Small Number"</code></pre>
</div>
</div>
<p>You can use <code>ifelse()</code> with vectors too:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb293"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb293-1"><a href="#cb293-1" aria-hidden="true" tabindex="-1"></a>MyValue <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">20</span>) <span class="co"># Works with vectors too</span></span>
<span id="cb293-2"><a href="#cb293-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ifelse</span>(MyValue <span class="sc">&gt;</span> <span class="dv">10</span>, </span>
<span id="cb293-3"><a href="#cb293-3" aria-hidden="true" tabindex="-1"></a>       <span class="st">"Large Number"</span>, </span>
<span id="cb293-4"><a href="#cb293-4" aria-hidden="true" tabindex="-1"></a>       <span class="st">"Small Number"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Small Number" "Small Number" "Large Number" "Large Number"</code></pre>
</div>
</div>
<p>This is a more complete example that gets several input values for a loan application, does a number of calculations and then makes a decline/approve decision recommendation. Let’s do it in steps:</p>
<p>Input data:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb295"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb295-1"><a href="#cb295-1" aria-hidden="true" tabindex="-1"></a>CarPrice <span class="ot">&lt;-</span> <span class="dv">30000</span></span>
<span id="cb295-2"><a href="#cb295-2" aria-hidden="true" tabindex="-1"></a>DownPayment <span class="ot">&lt;-</span> <span class="dv">2000</span></span>
<span id="cb295-3"><a href="#cb295-3" aria-hidden="true" tabindex="-1"></a>LoanYears <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb295-4"><a href="#cb295-4" aria-hidden="true" tabindex="-1"></a>AnnualInterest <span class="ot">&lt;-</span> <span class="fl">0.04</span> <span class="co"># i.e., 4%</span></span>
<span id="cb295-5"><a href="#cb295-5" aria-hidden="true" tabindex="-1"></a>AnnualIncome <span class="ot">&lt;-</span> <span class="dv">60000</span></span>
<span id="cb295-6"><a href="#cb295-6" aria-hidden="true" tabindex="-1"></a>MonthlyObligations <span class="ot">&lt;-</span> <span class="dv">2300</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then do the necessary calculations:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb296"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb296-1"><a href="#cb296-1" aria-hidden="true" tabindex="-1"></a>LoanAmount <span class="ot">&lt;-</span> CarPrice <span class="sc">-</span> DownPayment</span>
<span id="cb296-2"><a href="#cb296-2" aria-hidden="true" tabindex="-1"></a>LoanMonths <span class="ot">&lt;-</span> LoanYears <span class="sc">*</span> <span class="dv">12</span></span>
<span id="cb296-3"><a href="#cb296-3" aria-hidden="true" tabindex="-1"></a>MonthlyInterest <span class="ot">&lt;-</span> AnnualInterest <span class="sc">/</span> <span class="dv">12</span></span>
<span id="cb296-4"><a href="#cb296-4" aria-hidden="true" tabindex="-1"></a>MonthlyPmt <span class="ot">&lt;-</span> LoanAmount <span class="sc">*</span> MonthlyInterest <span class="sc">/</span> </span>
<span id="cb296-5"><a href="#cb296-5" aria-hidden="true" tabindex="-1"></a>             (<span class="dv">1</span> <span class="sc">-</span> (<span class="dv">1</span> <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">+</span> MonthlyInterest) <span class="sc">^</span> LoanMonths))</span>
<span id="cb296-6"><a href="#cb296-6" aria-hidden="true" tabindex="-1"></a>MonthlyPmt <span class="ot">&lt;-</span> <span class="fu">round</span>(MonthlyPmt, <span class="at">digits =</span> <span class="dv">2</span>) <span class="co"># Let's round to two decimals.</span></span>
<span id="cb296-7"><a href="#cb296-7" aria-hidden="true" tabindex="-1"></a>MonthlyIncome <span class="ot">&lt;-</span> AnnualIncome <span class="sc">/</span> <span class="dv">12</span></span>
<span id="cb296-8"><a href="#cb296-8" aria-hidden="true" tabindex="-1"></a>DisposableIncome <span class="ot">&lt;-</span> MonthlyIncome <span class="sc">-</span> MonthlyObligations</span>
<span id="cb296-9"><a href="#cb296-9" aria-hidden="true" tabindex="-1"></a>PmtToDisposableRatio <span class="ot">&lt;-</span> <span class="fu">round</span>(MonthlyPmt <span class="sc">/</span> DisposableIncome, <span class="at">digits =</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Finally, display results. Notice that I use the concatenation function <code>cat()</code> instead of <code>print()</code>, which allows you to add line brakes with <code>"\n"</code> and eliminate the annoying line indices, e.g., [1].</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb297"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb297-1"><a href="#cb297-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">paste</span>(<span class="st">"For a loan amount of"</span>, LoanAmount,  </span>
<span id="cb297-2"><a href="#cb297-2" aria-hidden="true" tabindex="-1"></a>            <span class="st">"for"</span>, LoanYears, <span class="st">"years"</span>, <span class="st">"or"</span>, LoanMonths, <span class="st">"months"</span>, <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb297-3"><a href="#cb297-3" aria-hidden="true" tabindex="-1"></a>            <span class="st">"at annual interest rate of"</span>, <span class="dv">100</span> <span class="sc">*</span> AnnualInterest, <span class="st">"percent"</span>,<span class="st">"</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb297-4"><a href="#cb297-4" aria-hidden="true" tabindex="-1"></a>            <span class="st">"and a disposable income of"</span>, DisposableIncome, <span class="st">"the:"</span>, <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>For a loan amount of 28000 for 5 years or 60 months 
 at annual interest rate of 4 percent 
 and a disposable income of 2700 the: </code></pre>
</div>
<div class="sourceCode cell-code" id="cb299"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb299-1"><a href="#cb299-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">sprintf</span>(<span class="st">"Monthly payment is $ %s"</span>, MonthlyPmt), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Monthly payment is $ 515.66 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb301"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb301-1"><a href="#cb301-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">sprintf</span>(<span class="st">"Monthly payment to disposable income ratio is %s"</span>,</span>
<span id="cb301-2"><a href="#cb301-2" aria-hidden="true" tabindex="-1"></a>              PmtToDisposableRatio), <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Monthly payment to disposable income ratio is 0.191 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb303"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb303-1"><a href="#cb303-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (PmtToDisposableRatio <span class="sc">&gt;</span> <span class="fl">0.2</span>) <span class="co"># i.e., loan payment is more than 20% if income</span></span>
<span id="cb303-2"><a href="#cb303-2" aria-hidden="true" tabindex="-1"></a>  {<span class="fu">cat</span>(<span class="st">"Your loan application has been declined"</span>)} <span class="cf">else</span></span>
<span id="cb303-3"><a href="#cb303-3" aria-hidden="true" tabindex="-1"></a>  {<span class="fu">cat</span>(<span class="st">"Your loan application has been approved"</span>)}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Your loan application has been approved</code></pre>
</div>
</div>
</section>
</section>
<section id="program-control-loops" class="level2">
<h2 class="anchored" data-anchor-id="program-control-loops">2.11 Program Control: Loops</h2>
<p>Loops are one of the most powerful software features in just about any language. A loop allows you to perform a number of commands several time until some condition is met to terminate the loop. Typically, there is an index or value that changes in each loop. For example, we may want to perform a bunch of calculations on the first 10 rows of a table.</p>
<p>There are various types of loops, but the most common are <code>for</code> and <code>while</code> loops. <code>for</code> loops performs a loop “for” each of the values specified. When the values end the loop ends. In contrast <code>while</code> loops will continue to loop “while” a certain condition is met. I illustrate both below.</p>
<p><strong>CAUTION:</strong> Improperly written loops are one of the most common sources of software malfunction. In particular, loops that do not specify the <code>for</code> or <code>while</code> condition correctly may cause a program to go into an infinite loop that never terminates. You ever wonder why a program spins and spins some times. Most likely, it is an infinite loop somewhere in the code.</p>
<section id="example-of-a-for-loop" class="level4">
<h4 class="anchored" data-anchor-id="example-of-a-for-loop">Example of a <code>for</code> loop</h4>
<p>In the first loop, <code>i</code> will take the value of <code>1</code>. In the second loop it will take the value of <code>2</code>, etc. In the last loop, <code>i</code> will take a value of <code>10</code> and the loop will terminate after that.</p>
<p>This script will <strong>NOT</strong> display the R code or the output</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb305"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb305-1"><a href="#cb305-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>) {</span>
<span id="cb305-2"><a href="#cb305-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"The number is"</span>, i)) <span class="co"># paste() concatenates strings</span></span>
<span id="cb305-3"><a href="#cb305-3" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The number is 1"
[1] "The number is 2"
[1] "The number is 3"
[1] "The number is 4"
[1] "The number is 5"
[1] "The number is 6"
[1] "The number is 7"
[1] "The number is 8"
[1] "The number is 9"
[1] "The number is 10"</code></pre>
</div>
</div>
<p>If you want <code>i</code> to increment by more than <code>1</code> you can use the <code>seq()</code> function. In the example below <code>i</code> takes values in the sequence from <code>1</code> to <code>10</code>, but in increments of <code>2</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb307"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb307-1"><a href="#cb307-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> <span class="fu">seq</span>(<span class="dv">1</span>,<span class="dv">10</span>,<span class="dv">2</span>)) {</span>
<span id="cb307-2"><a href="#cb307-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"The number is"</span>, i)) <span class="co"># paste() concatenates strings</span></span>
<span id="cb307-3"><a href="#cb307-3" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The number is 1"
[1] "The number is 3"
[1] "The number is 5"
[1] "The number is 7"
[1] "The number is 9"</code></pre>
</div>
</div>
</section>
<section id="example-of-a-while-loop" class="level4">
<h4 class="anchored" data-anchor-id="example-of-a-while-loop">Example of a “while” loop</h4>
<p>In a <strong>while loop</strong>, the loop runs <strong>while</strong> a condition is true. These are a bit trickier because While loops generally require initializing a variable with a value, which will change and which we will need to check in the while condition. In the example below, we control the <strong>while</strong> loop with the variable <strong>i</strong>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb309"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb309-1"><a href="#cb309-1" aria-hidden="true" tabindex="-1"></a>i <span class="ot">&lt;-</span> <span class="dv">1</span> <span class="co"># This is like a counter, which we initialize to 1</span></span>
<span id="cb309-2"><a href="#cb309-2" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> (i <span class="sc">&lt;=</span> <span class="dv">10</span>) { </span>
<span id="cb309-3"><a href="#cb309-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"The number is"</span>, i)) </span>
<span id="cb309-4"><a href="#cb309-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># we need to increment i in each loop or you will have an endless loop</span></span>
<span id="cb309-5"><a href="#cb309-5" aria-hidden="true" tabindex="-1"></a>  i <span class="ot">&lt;-</span> i <span class="sc">+</span> <span class="dv">1</span> </span>
<span id="cb309-6"><a href="#cb309-6" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "The number is 1"
[1] "The number is 2"
[1] "The number is 3"
[1] "The number is 4"
[1] "The number is 5"
[1] "The number is 6"
[1] "The number is 7"
[1] "The number is 8"
[1] "The number is 9"
[1] "The number is 10"</code></pre>
</div>
</div>
<p>** Important:** omitting the counter increment command <code>&lt;- i + 1</code> would cause <code>i</code> to not increment, which will create an <strong>infinite loop</strong> that never stops. Can you see why?</p>
</section>
</section>
<section id="simple-statistics-with-r" class="level2">
<h2 class="anchored" data-anchor-id="simple-statistics-with-r">2.12 Simple Statistics with R</h2>
<section id="working-with-data" class="level3">
<h3 class="anchored" data-anchor-id="working-with-data">Working with Data</h3>
<p>Let’s first open a data set <strong>diamonds</strong> contained in the package <strong>{ggplot2}</strong>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb311"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb311-1"><a href="#cb311-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(ggplot2) <span class="co"># Contains the "diamonds" data set</span></span>
<span id="cb311-2"><a href="#cb311-2" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(diamonds) </span>
<span id="cb311-3"><a href="#cb311-3" aria-hidden="true" tabindex="-1"></a><span class="fu">attach</span>(diamonds)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Note: certain R commands and models require that a data set be active in memory, which we accomplish with the <code>attach()</code> function. Let’s look at the first 6 records with the <code>head()</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb312"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb312-1"><a href="#cb312-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(diamonds)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 10
  carat cut       color clarity depth table price     x     y     z
  &lt;dbl&gt; &lt;ord&gt;     &lt;ord&gt; &lt;ord&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1  0.23 Ideal     E     SI2      61.5    55   326  3.95  3.98  2.43
2  0.21 Premium   E     SI1      59.8    61   326  3.89  3.84  2.31
3  0.23 Good      E     VS1      56.9    65   327  4.05  4.07  2.31
4  0.29 Premium   I     VS2      62.4    58   334  4.2   4.23  2.63
5  0.31 Good      J     SI2      63.3    58   335  4.34  4.35  2.75
6  0.24 Very Good J     VVS2     62.8    57   336  3.94  3.96  2.48</code></pre>
</div>
</div>
<p>Let’s get diamond price means by cut</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb314"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb314-1"><a href="#cb314-1" aria-hidden="true" tabindex="-1"></a><span class="fu">aggregate</span>(price <span class="sc">~</span> cut, </span>
<span id="cb314-2"><a href="#cb314-2" aria-hidden="true" tabindex="-1"></a>          diamonds, </span>
<span id="cb314-3"><a href="#cb314-3" aria-hidden="true" tabindex="-1"></a>          mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        cut    price
1      Fair 4358.758
2      Good 3928.864
3 Very Good 3981.760
4   Premium 4584.258
5     Ideal 3457.542</code></pre>
</div>
<div class="sourceCode cell-code" id="cb316"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb316-1"><a href="#cb316-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Works like SQL command: SELECT Avg(Price) FROM diamonds GROUP BY cut</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To group by more than one attribute use the + operator</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb317"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb317-1"><a href="#cb317-1" aria-hidden="true" tabindex="-1"></a><span class="fu">aggregate</span>(price <span class="sc">~</span> cut <span class="sc">+</span> color, </span>
<span id="cb317-2"><a href="#cb317-2" aria-hidden="true" tabindex="-1"></a>          diamonds, </span>
<span id="cb317-3"><a href="#cb317-3" aria-hidden="true" tabindex="-1"></a>          mean)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         cut color    price
1       Fair     D 4291.061
2       Good     D 3405.382
3  Very Good     D 3470.467
4    Premium     D 3631.293
5      Ideal     D 2629.095
6       Fair     E 3682.312
7       Good     E 3423.644
8  Very Good     E 3214.652
9    Premium     E 3538.914
10     Ideal     E 2597.550
11      Fair     F 3827.003
12      Good     F 3495.750
13 Very Good     F 3778.820
14   Premium     F 4324.890
15     Ideal     F 3374.939
16      Fair     G 4239.255
17      Good     G 4123.482
18 Very Good     G 3872.754
19   Premium     G 4500.742
20     Ideal     G 3720.706
21      Fair     H 5135.683
22      Good     H 4276.255
23 Very Good     H 4535.390
24   Premium     H 5216.707
25     Ideal     H 3889.335
26      Fair     I 4685.446
27      Good     I 5078.533
28 Very Good     I 5255.880
29   Premium     I 5946.181
30     Ideal     I 4451.970
31      Fair     J 4975.655
32      Good     J 4574.173
33 Very Good     J 5103.513
34   Premium     J 6294.592
35     Ideal     J 4918.186</code></pre>
</div>
</div>
<p>To aggregate more than one column, use <code>cbind()</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb319"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb319-1"><a href="#cb319-1" aria-hidden="true" tabindex="-1"></a><span class="fu">aggregate</span>(<span class="fu">cbind</span>(price, carat) <span class="sc">~</span> cut, </span>
<span id="cb319-2"><a href="#cb319-2" aria-hidden="true" tabindex="-1"></a>          diamonds, </span>
<span id="cb319-3"><a href="#cb319-3" aria-hidden="true" tabindex="-1"></a>          mean) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        cut    price     carat
1      Fair 4358.758 1.0461366
2      Good 3928.864 0.8491847
3 Very Good 3981.760 0.8063814
4   Premium 4584.258 0.8919549
5     Ideal 3457.542 0.7028370</code></pre>
</div>
</div>
<p>Note the <code>cbind()</code> function binds columns together. To bind rows use <code>rbind()</code></p>
</section>
<section id="simple-graphics" class="level3">
<h3 class="anchored" data-anchor-id="simple-graphics">Simple Graphics</h3>
<section id="r-base-package" class="level4">
<h4 class="anchored" data-anchor-id="r-base-package">R Base Package:</h4>
<p><strong>Plots</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb321"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb321-1"><a href="#cb321-1" aria-hidden="true" tabindex="-1"></a><span class="fu">boxplot</span>(diamonds<span class="sc">$</span>carat) <span class="co"># Boxplot of a single variable</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="PAML4M_1R_R_Intro_files/figure-html/unnamed-chunk-135-1.png" class="img-fluid" width="960"></p>
</div>
<div class="sourceCode cell-code" id="cb322"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb322-1"><a href="#cb322-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(diamonds<span class="sc">$</span>carat, </span>
<span id="cb322-2"><a href="#cb322-2" aria-hidden="true" tabindex="-1"></a>     diamonds<span class="sc">$</span>price) <span class="co"># Scatterplot of 2 variables</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="PAML4M_1R_R_Intro_files/figure-html/unnamed-chunk-135-2.png" class="img-fluid" width="960"></p>
</div>
</div>
<p><strong>Histograms</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb323"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb323-1"><a href="#cb323-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(diamonds<span class="sc">$</span>carat) <span class="co"># Histogram of 1 variable</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="PAML4M_1R_R_Intro_files/figure-html/unnamed-chunk-136-1.png" class="img-fluid" width="960"></p>
</div>
</div>
<p>Let’s add some labels</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb324"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb324-1"><a href="#cb324-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(diamonds<span class="sc">$</span>carat, </span>
<span id="cb324-2"><a href="#cb324-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Carat Histogram"</span>, </span>
<span id="cb324-3"><a href="#cb324-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"Carats"</span>) <span class="co"># w/labels</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="PAML4M_1R_R_Intro_files/figure-html/unnamed-chunk-137-1.png" class="img-fluid" width="960"></p>
</div>
<div class="sourceCode cell-code" id="cb325"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb325-1"><a href="#cb325-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(diamonds<span class="sc">$</span>price, </span>
<span id="cb325-2"><a href="#cb325-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Diamond Price"</span>, </span>
<span id="cb325-3"><a href="#cb325-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"Price"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="PAML4M_1R_R_Intro_files/figure-html/unnamed-chunk-137-2.png" class="img-fluid" width="960"></p>
</div>
</div>
<p><strong>Note:</strong> graphs start with a <strong>primary</strong> graph. A <strong>primary</strong> graph is rendered as a new graph output. Once the primary graph is rendered you can add layers to the graph to include things like labels, graph name, trend lines, colors, etc. Graph layers only work once a primary graph has been rendered.</p>
<p>For example, <code>qqplots</code> are popular for detecting non-normality in the data – if the dots do not align with the straight line the data deviates from normality:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb326"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb326-1"><a href="#cb326-1" aria-hidden="true" tabindex="-1"></a><span class="fu">qqnorm</span>(diamonds<span class="sc">$</span>price) <span class="co"># A primary graph rendering the qqplot</span></span>
<span id="cb326-2"><a href="#cb326-2" aria-hidden="true" tabindex="-1"></a><span class="fu">qqline</span>(diamonds<span class="sc">$</span>price) <span class="co"># A layer rendering a qqline on top of the qqplot</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="PAML4M_1R_R_Intro_files/figure-html/unnamed-chunk-138-1.png" class="img-fluid" width="960"></p>
</div>
</div>
<p>The data is not very normal. Maybe logging the data will help:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb327"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb327-1"><a href="#cb327-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(<span class="fu">log</span>(diamonds<span class="sc">$</span>price), </span>
<span id="cb327-2"><a href="#cb327-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">"Diamond Log(Price)"</span>, </span>
<span id="cb327-3"><a href="#cb327-3" aria-hidden="true" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">"Price"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="PAML4M_1R_R_Intro_files/figure-html/unnamed-chunk-139-1.png" class="img-fluid" width="960"></p>
</div>
<div class="sourceCode cell-code" id="cb328"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb328-1"><a href="#cb328-1" aria-hidden="true" tabindex="-1"></a><span class="fu">qqnorm</span>(<span class="fu">log</span>(diamonds<span class="sc">$</span>price))</span>
<span id="cb328-2"><a href="#cb328-2" aria-hidden="true" tabindex="-1"></a><span class="fu">qqline</span>(<span class="fu">log</span>(diamonds<span class="sc">$</span>price))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="PAML4M_1R_R_Intro_files/figure-html/unnamed-chunk-139-2.png" class="img-fluid" width="960"></p>
</div>
<div class="sourceCode cell-code" id="cb329"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb329-1"><a href="#cb329-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Yes it helps align the dots to the line, yielding a more normal distribution.</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="ggplot2" class="level3">
<h3 class="anchored" data-anchor-id="ggplot2">ggplot2</h3>
<p><code>{ggplot2}</code> is one of the most popular and powerful graphic packages in R. <code>{lattice}</code> is another popular graph package. When you install the <code>{ggplot2}</code> package it will install the <code>{lattice}</code> package automatically. Let’s look at <code>{ggplot2}</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb330"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb330-1"><a href="#cb330-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2) <span class="co"># Activate the library first</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><strong>Important:</strong> <strong>{ggplot2}</strong> has a unique syntax. This syntax derives from a widely followed <strong>Grammar of Graphics</strong> by <code>Wilkinson (2005)</code> and the <strong>Layered Grammar of Graphics</strong> by <code>Wickham 2010</code>.</p>
<p>Here is an excellent book on how to use <strong>{ggplot2}</strong> written by the package author. This book states that <strong>the grammar of graphics</strong> tells us that a statistical graphic is a mapping from data to <strong>aesthetic</strong> attributes (color, shape, size) of <strong>geometric</strong> objects or <strong>geoms</strong> (points, lines, bars). The plot may also contain statistical transformations of the data and is drawn on a specific coordinate system. <strong>Faceting</strong> can be used to generate the same plot for different subsets of the data set. It is the combination of these independent components that make up a graphic. Here is the book:</p>
<p><a href="https://ggplot2-book.org/index.html">https://ggplot2-book.org/index.html</a></p>
<p>This book states that “the grammar [of graphics] tells us that a statistical graphic is a mapping from data to aesthetic attributes (colour, shape, size) of geometric objects (points, lines, bars). The plot may also contain statistical transformations of the data and is drawn on a specific coordinate system. Facetting can be used to generate the same plot for different subsets of the dataset. It is the combination of these independent components that make up a graphic.</p>
<p>Histograms – the geometric object is geom_histogram and the aesthetic is x = carat:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb331"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb331-1"><a href="#cb331-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> diamonds) <span class="sc">+</span> </span>
<span id="cb331-2"><a href="#cb331-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">x =</span> carat))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="PAML4M_1R_R_Intro_files/figure-html/unnamed-chunk-141-1.png" class="img-fluid" width="960"></p>
</div>
</div>
<p>We can save graphs in objects. Here we define and save a graph, but no plot yet:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb332"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb332-1"><a href="#cb332-1" aria-hidden="true" tabindex="-1"></a>g <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(diamonds, </span>
<span id="cb332-2"><a href="#cb332-2" aria-hidden="true" tabindex="-1"></a>            <span class="fu">aes</span>(<span class="at">x =</span> carat, </span>
<span id="cb332-3"><a href="#cb332-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">y =</span> price)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We then add properties, e.g., type of graph, and display it:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb333"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb333-1"><a href="#cb333-1" aria-hidden="true" tabindex="-1"></a>g <span class="sc">+</span> <span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="PAML4M_1R_R_Intro_files/figure-html/unnamed-chunk-143-1.png" class="img-fluid" width="960"></p>
</div>
</div>
<p>We can then change the properties if you wish, e.g., add color</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb334"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb334-1"><a href="#cb334-1" aria-hidden="true" tabindex="-1"></a>g <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> color))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="PAML4M_1R_R_Intro_files/figure-html/unnamed-chunk-144-1.png" class="img-fluid" width="960"></p>
</div>
<div class="sourceCode cell-code" id="cb335"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb335-1"><a href="#cb335-1" aria-hidden="true" tabindex="-1"></a>g <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> color)) <span class="sc">+</span> </span>
<span id="cb335-2"><a href="#cb335-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_wrap</span>(<span class="sc">~</span>color) <span class="co"># Faceted by color</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="PAML4M_1R_R_Intro_files/figure-html/unnamed-chunk-144-2.png" class="img-fluid" width="960"></p>
</div>
<div class="sourceCode cell-code" id="cb336"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb336-1"><a href="#cb336-1" aria-hidden="true" tabindex="-1"></a>g <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> color)) <span class="sc">+</span> </span>
<span id="cb336-2"><a href="#cb336-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">facet_grid</span>(cut<span class="sc">~</span>color) <span class="co"># Faceted in grids</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="PAML4M_1R_R_Intro_files/figure-html/unnamed-chunk-144-3.png" class="img-fluid" width="960"></p>
</div>
</div>
</section>
<section id="simple-statistics" class="level3">
<h3 class="anchored" data-anchor-id="simple-statistics">Simple Statistics</h3>
<p>Set the seed number first using the <code>set.seed()</code> function. But before you do that, set the <strong>random number generator</strong> (RNG) default using <code>RNGkind(sample.kind="default")</code>. Random number generators as based on long tables that contain random numbers. The seed is the first number in the random table to use. If you only need one random sample, the seed number is not important – just pick any seed number. But if you will be re-sampling several times, use the same seed to draw the same sample each time (i.e., when you want repeatable results), or use different seeds to draw different samples each time. There are different kinds of RNG’s and which one you pick will not make a big difference because the numbers will still be random. But the type you chose will affect how the random numbers will be generated and rounded and using the same default I use will make it more likely that your results will match mine.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb337"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb337-1"><a href="#cb337-1" aria-hidden="true" tabindex="-1"></a><span class="fu">RNGkind</span>(<span class="at">sample.kind =</span> <span class="st">"default"</span>)</span>
<span id="cb337-2"><a href="#cb337-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Generating a random sample of 50 observations from a normal distribution</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb338"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb338-1"><a href="#cb338-1" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">rnorm</span>(<span class="dv">50</span>) </span>
<span id="cb338-2"><a href="#cb338-2" aria-hidden="true" tabindex="-1"></a>x <span class="co"># Check out the sample</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] -0.62645381  0.18364332 -0.83562861  1.59528080  0.32950777 -0.82046838
 [7]  0.48742905  0.73832471  0.57578135 -0.30538839  1.51178117  0.38984324
[13] -0.62124058 -2.21469989  1.12493092 -0.04493361 -0.01619026  0.94383621
[19]  0.82122120  0.59390132  0.91897737  0.78213630  0.07456498 -1.98935170
[25]  0.61982575 -0.05612874 -0.15579551 -1.47075238 -0.47815006  0.41794156
[31]  1.35867955 -0.10278773  0.38767161 -0.05380504 -1.37705956 -0.41499456
[37] -0.39428995 -0.05931340  1.10002537  0.76317575 -0.16452360 -0.25336168
[43]  0.69696338  0.55666320 -0.68875569 -0.70749516  0.36458196  0.76853292
[49] -0.11234621  0.88110773</code></pre>
</div>
</div>
<p>Generating samples and sub-samples. To select 100 random numbers from 1 to <code>obs</code> (e.g., 1,000).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb340"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb340-1"><a href="#cb340-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Suppose you have 1000 observations, indexed from 1 to 1000, and you want to draw a random of 100 observations. The first thing to do is to create a vector containing 100 random numbers from 1 to 1000 to be used to extract the respective rows from the data set:</span></span>
<span id="cb340-2"><a href="#cb340-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb340-3"><a href="#cb340-3" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">1000</span>, <span class="dv">100</span>) <span class="co"># This is a vector with 100 random numbers</span></span>
<span id="cb340-4"><a href="#cb340-4" aria-hidden="true" tabindex="-1"></a>train <span class="co"># Check it out</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] 924 620 304 545 557 661 287 614 145 329 487 855 851 630 498 858 816 619
 [19] 576 490 736 103 316  51 733 290 650 129 811 955 282 143 442 285 920 682
 [37]  48 501 716 511 295 536 693 214 808 737 339 346 675  43   1  29 590 918
 [55] 838 796 628 233 293 573 369 451  86 483 327 622 355 819 812  49 361 978
 [73] 242 440 758 817 818 247 751 219 135 111 532 377 408 977 565 912 467 356
 [91] 130 984  65 932 359 105 124  77 218 610</code></pre>
</div>
</div>
<p>But what if your data set changes or if you want a different random sample size? It is best not to hard code 1000 or 100 or any other number into your code. Rather, it is customary to store values in variables and then use the variables, which makes it much easier to change values when needed. For example, select a percentage (e.g., 75%) of random numbers from 1 to 1000:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb342"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb342-1"><a href="#cb342-1" aria-hidden="true" tabindex="-1"></a>obs <span class="ot">&lt;-</span> <span class="dv">1000</span> <span class="co"># Store the data set size in a variable</span></span>
<span id="cb342-2"><a href="#cb342-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb342-3"><a href="#cb342-3" aria-hidden="true" tabindex="-1"></a><span class="co"># You could also use obs &lt;- nrow(dataset), which will store the number of observations in the dataset in the variable obs. Then extract the sample using the variable obs:</span></span>
<span id="cb342-4"><a href="#cb342-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb342-5"><a href="#cb342-5" aria-hidden="true" tabindex="-1"></a>train <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span>obs, <span class="fl">0.75</span> <span class="sc">*</span> obs) </span>
<span id="cb342-6"><a href="#cb342-6" aria-hidden="true" tabindex="-1"></a>train</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1]  194   19  273  418  971  543  419  867  686  403  749  587   16   40  777
 [16]  818  604  634  664  138  719  500  761  672  229  423  421  140  126  526
 [31]  508  628  988  271  130  577  512  451  504  457  358  785  724  127  645
 [46]   41  876  927  885  840  548  305  809  413  576  129  309  958  874  441
 [61]  856  117  944  470  614  562  336  798  766  349  898   72  894  590  474
 [76]  168  501  974  951  455  969  356  625  234  484  121   73  539  553   15
 [91]  941  294   62  390  644   35  381  993   77  105  697  327  665   31  549
[106]  767  743   28  908  148  797  957  810  572  284  334  897  268   93  934
[121]  300  714  610  282  241   33  906  437  939   86  217  792  805  108  967
[136]  270  751  209  338  609  736  584  565  568  928  711  434  768  201  354
[151]  357  931  989  514  116  643  422  233  866  668  439  197  220  462  299
[166]  235  513  926  173   83  833  407  324  720  731  185  615  765  180  464
[181]  674  733  493  675  444  167   49  471  702  673  291  653  247  854  741
[196]  316  346  804  820   56   25   81  472  329  494  734  890  715  480  104
[211]    3  179  659  161  384  436  889  260  717   60  448  488  181  510  133
[226]  618  428  547  377  279  888  676  375  611  817  891  150  915  169  598
[241]  467  903  530  556  975   91  164  544  479   51  119  465  976  864  904
[256]  959   89  533  591  850  704  933   71  786  315  219  414  985  570  842
[271]  626  546  834  782  574  872  830  925  955  633  392  281  983    5  330
[286]  492   20  183  857   79  847   69  732  473  748  296  141  132   42  635
[301]  776  193  909  397  264  177  595  984  368  433  563  139  520  320  115
[316]  453  450  685  396  963  218  159  750  495  109  519  624  913  393  648
[331]  871   45  112   27  222  266  158  945  868  386  175  880  261  166  992
[346]  340   92  412  652   99  516  128  845  796  637  657  435  846  192   85
[361]  302  208  706  383  277   87  916  503  949  764  515  841  312  650   58
[376]  308  485  111  342  597  772  755  122   44  907   48  100  313  232  481
[391]  360   11  310  641  799  256   54  146  656  995  328    6  620  689  942
[406]  250  802  258  288  917  705  860  994  523  966  779  198  399  567  182
[421]  912   61  348  887  986   65  691  735  362   66  245  206  859  380  683
[436]  153   17  190  875  953  863  823  924  343  276  884  449  226  950  341
[451]  486  739  303   84  498  694  775  639  363  754  286  367  849  525  243
[466]  932  257  325  110   36  851  877  225  999  990  371  900  306  899  670
[481]  794  352   97  726  948  883  478  242  410  387  207  815  701  870    1
[496]  578  979  137  502  398  671  351  248   80  469  617  460  710  622  176
[511]  251  554   12  476  630  858  848  744    8  693  679  940  973   30    9
[526] 1000  721  361  649  425   43  278  978  411  812  102  781  118  970  323
[541]  816  385  322  211  463  947  566  758  682  901  997  552  892   13  295
[556]  703   70  718  824  365  345  631  964  737  987  442  865  708  262  895
[571]  200  607  280  461  612  293   14  667  902  339  790  285  579  709  237
[586]  483  223  569   59  808  655  555  123  844  420  561   24  221  394  252
[601]  170  712  716  753  527  376  713  174  680  896  811  466   29  793  575
[616]  369  511  447  496  605  326  759  722  518  774  382  289  125  416  923
[631]  482  144  836  149  134  827  401   21    7  355  298  374   94  700  806
[646]  445  267  681  930  290  593  124  332  532  730  852  961  727  688  581
[661]  551  415  770  696  586  690  760  314  491  803  972  738  919  402  135
[676]  172  795  186    2  773  822   57  589  378  244  800  456  636   32  490
[691]  965  507  742  545  646  596  747  602  162  459   75  131  960  853  160
[706]   88  550  893  151  443  274  843  304  698  801  538  763   23  647  337
[721]  771  740  878  311  107  372  287  789  214  292  783  613  446  254  199
[736]   22  427  333   52  263  522  829  825  113  454  114  662  642  619  231</code></pre>
</div>
</div>
<p>Random sample of 10% with replacement</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb344"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb344-1"><a href="#cb344-1" aria-hidden="true" tabindex="-1"></a>obs <span class="ot">&lt;-</span> <span class="dv">1000</span></span>
<span id="cb344-2"><a href="#cb344-2" aria-hidden="true" tabindex="-1"></a>X <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span>obs, <span class="at">size =</span> <span class="fl">0.1</span> <span class="sc">*</span> obs, <span class="at">replace =</span> T)</span>
<span id="cb344-3"><a href="#cb344-3" aria-hidden="true" tabindex="-1"></a><span class="co"># replace = T means that values in the sample can repeat in the sample</span></span>
<span id="cb344-4"><a href="#cb344-4" aria-hidden="true" tabindex="-1"></a>X <span class="co"># Check it out</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] 750  42 768 957 560 129 376  73 637 867 523 744 314 228 689 933 823 842
 [19] 789 701 996 407 476 928  25 280 507 332 890 186 517 159 721 518 430 669
 [37] 851 346 475 321 577 393 582 448 492 170 484 498 793 703 324 457  73 235
 [55] 569 551 318 804  58 787 900 931 567 349 568 272 131 425 868 660 910  14
 [73] 430 993 108 897  64 876 483  83 920 459 626 407 306 706 487 382 788 462
 [91] 632 752 458 149 929 375 800 756 284 796</code></pre>
</div>
</div>
<section id="bootstrapping" class="level4">
<h4 class="anchored" data-anchor-id="bootstrapping">Bootstrapping</h4>
<p>It is a statistical sampling method that can be used in many statistical procedures. We will not cover bootstrapping methods in this R tutorial, but we will go over this later. Bootstrapping is about re-sampling wiht replacement. Suppose you have 100 observations. If you get a sample of 100 with replacement, some of these 100 values will be repeated. If you re-sample another 100 values with replacement, you will get a different sample because the repeated values are likely to be different ones. For example, try this a few times:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb346"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb346-1"><a href="#cb346-1" aria-hidden="true" tabindex="-1"></a>obs <span class="ot">&lt;-</span> <span class="dv">100</span> <span class="co"># Let's illustrate with a smaller sample</span></span>
<span id="cb346-2"><a href="#cb346-2" aria-hidden="true" tabindex="-1"></a>boot.x <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span>obs, </span>
<span id="cb346-3"><a href="#cb346-3" aria-hidden="true" tabindex="-1"></a>                 <span class="at">size =</span> obs, </span>
<span id="cb346-4"><a href="#cb346-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">replace =</span> T)</span>
<span id="cb346-5"><a href="#cb346-5" aria-hidden="true" tabindex="-1"></a>boot.x <span class="co"># Notice all the values that are re-selected in the sample</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] 71  4 89 30 30 37 32 10 45 23  9 33 55 75 84 84 55 98 73 47 13  5 63  3 26
 [26] 17 65 46 48  8 83 82  2 46 86 36 55 68 78 61 75 45 16 25 36 69 91 95 27  2
 [51] 96 46 87 84 70 69 83 18 98 85 84 90 96 39 74 11 85 13 63 20 38 71 29 81  8
 [76] 38 32 24 70 87 74 11 10 14 43 80 46 27  1 68 39 54 23 96 16 40 20  4  9 80</code></pre>
</div>
</div>
</section>
</section>
<section id="other-basic-statistics-in-r" class="level3">
<h3 class="anchored" data-anchor-id="other-basic-statistics-in-r">Other basic statistics in R</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb348"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb348-1"><a href="#cb348-1" aria-hidden="true" tabindex="-1"></a>obs <span class="ot">&lt;-</span> <span class="dv">1000</span></span>
<span id="cb348-2"><a href="#cb348-2" aria-hidden="true" tabindex="-1"></a>x <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="dv">1</span><span class="sc">:</span>obs, </span>
<span id="cb348-3"><a href="#cb348-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="fl">0.10</span> <span class="sc">*</span> obs, </span>
<span id="cb348-4"><a href="#cb348-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">replace =</span> T)</span>
<span id="cb348-5"><a href="#cb348-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb348-6"><a href="#cb348-6" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(x) <span class="co"># Sample mean</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 525.86</code></pre>
</div>
<div class="sourceCode cell-code" id="cb350"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb350-1"><a href="#cb350-1" aria-hidden="true" tabindex="-1"></a><span class="fu">median</span>(x) <span class="co"># Sample median</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 539.5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb352"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb352-1"><a href="#cb352-1" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(x) <span class="co"># Maximum value in the sample</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 985</code></pre>
</div>
<div class="sourceCode cell-code" id="cb354"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb354-1"><a href="#cb354-1" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(x) <span class="co"># Minimum value in the sample</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 65</code></pre>
</div>
<div class="sourceCode cell-code" id="cb356"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb356-1"><a href="#cb356-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sd</span>(x) <span class="co"># Sample standard deviation</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 240.9954</code></pre>
</div>
<div class="sourceCode cell-code" id="cb358"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb358-1"><a href="#cb358-1" aria-hidden="true" tabindex="-1"></a><span class="fu">var</span>(x) <span class="co"># Sample variance</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 58078.77</code></pre>
</div>
<div class="sourceCode cell-code" id="cb360"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb360-1"><a href="#cb360-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(x) <span class="co"># Sample summary statistics</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
   65.0   349.5   539.5   525.9   723.5   985.0 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb362"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb362-1"><a href="#cb362-1" aria-hidden="true" tabindex="-1"></a><span class="fu">hist</span>(x) <span class="co"># Histogram of sample values</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="PAML4M_1R_R_Intro_files/figure-html/unnamed-chunk-151-1.png" class="img-fluid" width="960"></p>
</div>
<div class="sourceCode cell-code" id="cb363"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb363-1"><a href="#cb363-1" aria-hidden="true" tabindex="-1"></a><span class="fu">qqnorm</span>(x) <span class="co"># QQ Plot of x</span></span>
<span id="cb363-2"><a href="#cb363-2" aria-hidden="true" tabindex="-1"></a><span class="fu">qqline</span>(x) <span class="co"># QQ Line of x</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="PAML4M_1R_R_Intro_files/figure-html/unnamed-chunk-151-2.png" class="img-fluid" width="960"></p>
</div>
<div class="sourceCode cell-code" id="cb364"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb364-1"><a href="#cb364-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mtcars) <span class="co"># Summary statistics on a dataset</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      mpg             cyl             disp             hp       
 Min.   :10.40   Min.   :4.000   Min.   : 71.1   Min.   : 52.0  
 1st Qu.:15.43   1st Qu.:4.000   1st Qu.:120.8   1st Qu.: 96.5  
 Median :19.20   Median :6.000   Median :196.3   Median :123.0  
 Mean   :20.09   Mean   :6.188   Mean   :230.7   Mean   :146.7  
 3rd Qu.:22.80   3rd Qu.:8.000   3rd Qu.:326.0   3rd Qu.:180.0  
 Max.   :33.90   Max.   :8.000   Max.   :472.0   Max.   :335.0  
      drat             wt             qsec             vs        
 Min.   :2.760   Min.   :1.513   Min.   :14.50   Min.   :0.0000  
 1st Qu.:3.080   1st Qu.:2.581   1st Qu.:16.89   1st Qu.:0.0000  
 Median :3.695   Median :3.325   Median :17.71   Median :0.0000  
 Mean   :3.597   Mean   :3.217   Mean   :17.85   Mean   :0.4375  
 3rd Qu.:3.920   3rd Qu.:3.610   3rd Qu.:18.90   3rd Qu.:1.0000  
 Max.   :4.930   Max.   :5.424   Max.   :22.90   Max.   :1.0000  
       am              gear            carb      
 Min.   :0.0000   Min.   :3.000   Min.   :1.000  
 1st Qu.:0.0000   1st Qu.:3.000   1st Qu.:2.000  
 Median :0.0000   Median :4.000   Median :2.000  
 Mean   :0.4062   Mean   :3.688   Mean   :2.812  
 3rd Qu.:1.0000   3rd Qu.:4.000   3rd Qu.:4.000  
 Max.   :1.0000   Max.   :5.000   Max.   :8.000  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb366"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb366-1"><a href="#cb366-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Correlation matrix for mtcars data set, display 2 digits</span></span>
<span id="cb366-2"><a href="#cb366-2" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">cor</span>(mtcars), </span>
<span id="cb366-3"><a href="#cb366-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">digits =</span> <span class="dv">2</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       mpg   cyl  disp    hp   drat    wt   qsec    vs     am  gear   carb
mpg   1.00 -0.85 -0.85 -0.78  0.681 -0.87  0.419  0.66  0.600  0.48 -0.551
cyl  -0.85  1.00  0.90  0.83 -0.700  0.78 -0.591 -0.81 -0.523 -0.49  0.527
disp -0.85  0.90  1.00  0.79 -0.710  0.89 -0.434 -0.71 -0.591 -0.56  0.395
hp   -0.78  0.83  0.79  1.00 -0.449  0.66 -0.708 -0.72 -0.243 -0.13  0.750
drat  0.68 -0.70 -0.71 -0.45  1.000 -0.71  0.091  0.44  0.713  0.70 -0.091
wt   -0.87  0.78  0.89  0.66 -0.712  1.00 -0.175 -0.55 -0.692 -0.58  0.428
qsec  0.42 -0.59 -0.43 -0.71  0.091 -0.17  1.000  0.74 -0.230 -0.21 -0.656
vs    0.66 -0.81 -0.71 -0.72  0.440 -0.55  0.745  1.00  0.168  0.21 -0.570
am    0.60 -0.52 -0.59 -0.24  0.713 -0.69 -0.230  0.17  1.000  0.79  0.058
gear  0.48 -0.49 -0.56 -0.13  0.700 -0.58 -0.213  0.21  0.794  1.00  0.274
carb -0.55  0.53  0.39  0.75 -0.091  0.43 -0.656 -0.57  0.058  0.27  1.000</code></pre>
</div>
</div>
<p>Some libraries have additional useful statistical functions</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb368"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb368-1"><a href="#cb368-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(psych) <span class="co"># Has useful statistical functions</span></span>
<span id="cb368-2"><a href="#cb368-2" aria-hidden="true" tabindex="-1"></a><span class="fu">describe</span>(mtcars) <span class="co"># Descriptive statistics</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     vars  n   mean     sd median trimmed    mad   min    max  range  skew
mpg     1 32  20.09   6.03  19.20   19.70   5.41 10.40  33.90  23.50  0.61
cyl     2 32   6.19   1.79   6.00    6.23   2.97  4.00   8.00   4.00 -0.17
disp    3 32 230.72 123.94 196.30  222.52 140.48 71.10 472.00 400.90  0.38
hp      4 32 146.69  68.56 123.00  141.19  77.10 52.00 335.00 283.00  0.73
drat    5 32   3.60   0.53   3.70    3.58   0.70  2.76   4.93   2.17  0.27
wt      6 32   3.22   0.98   3.33    3.15   0.77  1.51   5.42   3.91  0.42
qsec    7 32  17.85   1.79  17.71   17.83   1.42 14.50  22.90   8.40  0.37
vs      8 32   0.44   0.50   0.00    0.42   0.00  0.00   1.00   1.00  0.24
am      9 32   0.41   0.50   0.00    0.38   0.00  0.00   1.00   1.00  0.36
gear   10 32   3.69   0.74   4.00    3.62   1.48  3.00   5.00   2.00  0.53
carb   11 32   2.81   1.62   2.00    2.65   1.48  1.00   8.00   7.00  1.05
     kurtosis    se
mpg     -0.37  1.07
cyl     -1.76  0.32
disp    -1.21 21.91
hp      -0.14 12.12
drat    -0.71  0.09
wt      -0.02  0.17
qsec     0.34  0.32
vs      -2.00  0.09
am      -1.92  0.09
gear    -1.07  0.13
carb     1.26  0.29</code></pre>
</div>
<div class="sourceCode cell-code" id="cb370"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb370-1"><a href="#cb370-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)  <span class="co"># Contains the diamonds dataset</span></span>
<span id="cb370-2"><a href="#cb370-2" aria-hidden="true" tabindex="-1"></a><span class="fu">describe</span>(diamonds) <span class="co"># Descriptive statistics</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>         vars     n    mean      sd  median trimmed     mad   min      max
carat       1 53940    0.80    0.47    0.70    0.73    0.47   0.2     5.01
cut*        2 53940    3.90    1.12    4.00    4.04    1.48   1.0     5.00
color*      3 53940    3.59    1.70    4.00    3.55    1.48   1.0     7.00
clarity*    4 53940    4.05    1.65    4.00    3.91    1.48   1.0     8.00
depth       5 53940   61.75    1.43   61.80   61.78    1.04  43.0    79.00
table       6 53940   57.46    2.23   57.00   57.32    1.48  43.0    95.00
price       7 53940 3932.80 3989.44 2401.00 3158.99 2475.94 326.0 18823.00
x           8 53940    5.73    1.12    5.70    5.66    1.38   0.0    10.74
y           9 53940    5.73    1.14    5.71    5.66    1.36   0.0    58.90
z          10 53940    3.54    0.71    3.53    3.49    0.85   0.0    31.80
            range  skew kurtosis    se
carat        4.81  1.12     1.26  0.00
cut*         4.00 -0.72    -0.40  0.00
color*       6.00  0.19    -0.87  0.01
clarity*     7.00  0.55    -0.39  0.01
depth       36.00 -0.08     5.74  0.01
table       52.00  0.80     2.80  0.01
price    18497.00  1.62     2.18 17.18
x           10.74  0.38    -0.62  0.00
y           58.90  2.43    91.20  0.00
z           31.80  1.52    47.08  0.00</code></pre>
</div>
</div>
<p>See what’s in the object</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb372"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb372-1"><a href="#cb372-1" aria-hidden="true" tabindex="-1"></a>descriptive.diamonds <span class="ot">&lt;-</span> <span class="fu">describe</span>(diamonds)</span>
<span id="cb372-2"><a href="#cb372-2" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(descriptive.diamonds)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Classes 'psych', 'describe' and 'data.frame':   10 obs. of  13 variables:
 $ vars    : int  1 2 3 4 5 6 7 8 9 10
 $ n       : num  53940 53940 53940 53940 53940 ...
 $ mean    : num  0.798 3.904 3.594 4.051 61.749 ...
 $ sd      : num  0.474 1.117 1.701 1.647 1.433 ...
 $ median  : num  0.7 4 4 4 61.8 ...
 $ trimmed : num  0.735 4.042 3.553 3.914 61.785 ...
 $ mad     : num  0.474 1.483 1.483 1.483 1.038 ...
 $ min     : num  0.2 1 1 1 43 43 326 0 0 0
 $ max     : num  5.01 5 7 8 79 ...
 $ range   : num  4.81 4 6 7 36 ...
 $ skew    : num  1.1166 -0.7171 0.1894 0.5514 -0.0823 ...
 $ kurtosis: num  1.256 -0.398 -0.867 -0.395 5.738 ...
 $ se      : num  0.00204 0.00481 0.00732 0.00709 0.00617 ...</code></pre>
</div>
</div>
<p>Now extract what you wish</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb374"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb374-1"><a href="#cb374-1" aria-hidden="true" tabindex="-1"></a>descriptive.diamonds<span class="sc">$</span>n</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 53940 53940 53940 53940 53940 53940 53940 53940 53940 53940</code></pre>
</div>
<div class="sourceCode cell-code" id="cb376"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb376-1"><a href="#cb376-1" aria-hidden="true" tabindex="-1"></a>descriptive.diamonds<span class="sc">$</span>mean</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]    0.7979397    3.9040971    3.5941973    4.0510197   61.7494049
 [6]   57.4571839 3932.7997219    5.7311572    5.7345260    3.5387338</code></pre>
</div>
<div class="sourceCode cell-code" id="cb378"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb378-1"><a href="#cb378-1" aria-hidden="true" tabindex="-1"></a>descriptive.diamonds<span class="sc">$</span>sd</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]    0.4740112    1.1165999    1.7011048    1.6471361    1.4326213
 [6]    2.2344906 3989.4397381    1.1217607    1.1421347    0.7056988</code></pre>
</div>
</div>
<p>Create a data frame with just what you need and columns labeled</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb380"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb380-1"><a href="#cb380-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data.frame</span>(<span class="st">"N"</span> <span class="ot">=</span> descriptive.diamonds<span class="sc">$</span>n, </span>
<span id="cb380-2"><a href="#cb380-2" aria-hidden="true" tabindex="-1"></a>           <span class="st">"Mean"</span> <span class="ot">=</span> descriptive.diamonds<span class="sc">$</span>mean,</span>
<span id="cb380-3"><a href="#cb380-3" aria-hidden="true" tabindex="-1"></a>           <span class="st">"Std.Dev."</span> <span class="ot">=</span> descriptive.diamonds<span class="sc">$</span>sd)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>       N         Mean     Std.Dev.
1  53940    0.7979397    0.4740112
2  53940    3.9040971    1.1165999
3  53940    3.5941973    1.7011048
4  53940    4.0510197    1.6471361
5  53940   61.7494049    1.4326213
6  53940   57.4571839    2.2344906
7  53940 3932.7997219 3989.4397381
8  53940    5.7311572    1.1217607
9  53940    5.7345260    1.1421347
10 53940    3.5387338    0.7056988</code></pre>
</div>
</div>
<p>About correlations, there are many R functions to visualize correlations, for example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb382"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb382-1"><a href="#cb382-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(corrplot) <span class="co"># Library for correlation plots</span></span>
<span id="cb382-2"><a href="#cb382-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb382-3"><a href="#cb382-3" aria-hidden="true" tabindex="-1"></a>mtCorr <span class="ot">&lt;-</span> <span class="fu">cor</span>(mtcars) <span class="co"># Store the correlation object</span></span>
<span id="cb382-4"><a href="#cb382-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb382-5"><a href="#cb382-5" aria-hidden="true" tabindex="-1"></a><span class="fu">corrplot</span>(mtCorr, </span>
<span id="cb382-6"><a href="#cb382-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">method =</span> <span class="st">"circle"</span>) <span class="co"># Then plot it</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="PAML4M_1R_R_Intro_files/figure-html/unnamed-chunk-156-1.png" class="img-fluid" width="960"></p>
</div>
<div class="sourceCode cell-code" id="cb383"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb383-1"><a href="#cb383-1" aria-hidden="true" tabindex="-1"></a><span class="fu">corrplot</span>(mtCorr, </span>
<span id="cb383-2"><a href="#cb383-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">method =</span> <span class="st">"ellipse"</span>) <span class="co"># Slanted left/right for +/- </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="PAML4M_1R_R_Intro_files/figure-html/unnamed-chunk-156-2.png" class="img-fluid" width="960"></p>
</div>
<div class="sourceCode cell-code" id="cb384"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb384-1"><a href="#cb384-1" aria-hidden="true" tabindex="-1"></a><span class="fu">corrplot</span>(mtCorr, </span>
<span id="cb384-2"><a href="#cb384-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">method =</span> <span class="st">"number"</span>) <span class="co"># Show correlation</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="PAML4M_1R_R_Intro_files/figure-html/unnamed-chunk-156-3.png" class="img-fluid" width="960"></p>
</div>
</div>
<p>To order variables clustered (grouped) by correlation values and omit the diagonal</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb385"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb385-1"><a href="#cb385-1" aria-hidden="true" tabindex="-1"></a><span class="fu">corrplot</span>(mtCorr, </span>
<span id="cb385-2"><a href="#cb385-2" aria-hidden="true" tabindex="-1"></a>         <span class="at">method =</span> <span class="st">"number"</span>, </span>
<span id="cb385-3"><a href="#cb385-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">order =</span> <span class="st">"hclust"</span>, </span>
<span id="cb385-4"><a href="#cb385-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">diag =</span> F, </span>
<span id="cb385-5"><a href="#cb385-5" aria-hidden="true" tabindex="-1"></a>         <span class="at">title =</span> <span class="st">"MT Cars Correlation Matrix"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="PAML4M_1R_R_Intro_files/figure-html/unnamed-chunk-157-1.png" class="img-fluid" width="960"></p>
</div>
<div class="sourceCode cell-code" id="cb386"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb386-1"><a href="#cb386-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Try ?corrplot() to see all its methods and arguments</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="regression-analysis" class="level3">
<h3 class="anchored" data-anchor-id="regression-analysis">Regression Analysis</h3>
<section id="regression-formulas" class="level4">
<h4 class="anchored" data-anchor-id="regression-formulas">Regression Formulas</h4>
<p>There are 2 ways to specify regression models. Which one you use will depend on the libraries and functions you are using. But the most common way to specify a regression formula is: <code>y ~ x1 + x2 + x3 + etc.</code>, where <code>y</code> is the outcome variable and the <code>x's</code> are the predictors. For example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb387"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb387-1"><a href="#cb387-1" aria-hidden="true" tabindex="-1"></a>lm.formula <span class="ot">&lt;-</span> mpg <span class="sc">~</span> cyl <span class="sc">+</span> disp <span class="sc">+</span> hp <span class="sc">+</span> wt</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>In the case above, we have created a <strong>formula object</strong> named <strong>lm.formula</strong>. This is <strong>NOT</strong> a regression model, but just a formula. This is very useful if the formula is long and complex and you plan to use it in many models, this way you don’t need to be re-typing it. Check it out:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb388"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb388-1"><a href="#cb388-1" aria-hidden="true" tabindex="-1"></a>lm.formula <span class="co"># Show the object just created</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>mpg ~ cyl + disp + hp + wt</code></pre>
</div>
<div class="sourceCode cell-code" id="cb390"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb390-1"><a href="#cb390-1" aria-hidden="true" tabindex="-1"></a><span class="fu">class</span>(lm.formula) <span class="co"># Show the object class</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "formula"</code></pre>
</div>
</div>
<p>To run the actual regression model we need to use the linear model <code>lm()</code> function. We can do this in several ways</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb392"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb392-1"><a href="#cb392-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lm</span>(mpg <span class="sc">~</span> cyl <span class="sc">+</span> disp <span class="sc">+</span> hp <span class="sc">+</span> wt, </span>
<span id="cb392-2"><a href="#cb392-2" aria-hidden="true" tabindex="-1"></a>   <span class="at">data =</span> mtcars) <span class="co"># Re-typing the formula and the data set</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = mpg ~ cyl + disp + hp + wt, data = mtcars)

Coefficients:
(Intercept)          cyl         disp           hp           wt  
   40.82854     -1.29332      0.01160     -0.02054     -3.85390  </code></pre>
</div>
</div>
<p>Or using the formula object created above:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb394"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb394-1"><a href="#cb394-1" aria-hidden="true" tabindex="-1"></a><span class="fu">lm</span>(lm.formula, </span>
<span id="cb394-2"><a href="#cb394-2" aria-hidden="true" tabindex="-1"></a>   <span class="at">data =</span> mtcars) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = lm.formula, data = mtcars)

Coefficients:
(Intercept)          cyl         disp           hp           wt  
   40.82854     -1.29332      0.01160     -0.02054     -3.85390  </code></pre>
</div>
</div>
<p>The two methods above are OK for quick models, but it is better to store the regression results in an object, so that you can access its methods and properties, either with:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb396"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb396-1"><a href="#cb396-1" aria-hidden="true" tabindex="-1"></a>lm.model <span class="ot">&lt;-</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> cyl <span class="sc">+</span> disp <span class="sc">+</span> hp <span class="sc">+</span> wt, </span>
<span id="cb396-2"><a href="#cb396-2" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> mtcars) <span class="co"># Or</span></span>
<span id="cb396-3"><a href="#cb396-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb396-4"><a href="#cb396-4" aria-hidden="true" tabindex="-1"></a>lm.model <span class="ot">&lt;-</span> <span class="fu">lm</span>(lm.formula, </span>
<span id="cb396-5"><a href="#cb396-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">data =</span> mtcars)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now that we have the regression results stored in an object, let’s extract information from it:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb397"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb397-1"><a href="#cb397-1" aria-hidden="true" tabindex="-1"></a>lm.model <span class="co"># Quick display of the model results</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = lm.formula, data = mtcars)

Coefficients:
(Intercept)          cyl         disp           hp           wt  
   40.82854     -1.29332      0.01160     -0.02054     -3.85390  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb399"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb399-1"><a href="#cb399-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(lm.model) <span class="co"># More complete regression output</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = lm.formula, data = mtcars)

Residuals:
    Min      1Q  Median      3Q     Max 
-4.0562 -1.4636 -0.4281  1.2854  5.8269 

Coefficients:
            Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) 40.82854    2.75747  14.807 1.76e-14 ***
cyl         -1.29332    0.65588  -1.972 0.058947 .  
disp         0.01160    0.01173   0.989 0.331386    
hp          -0.02054    0.01215  -1.691 0.102379    
wt          -3.85390    1.01547  -3.795 0.000759 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 2.513 on 27 degrees of freedom
Multiple R-squared:  0.8486,    Adjusted R-squared:  0.8262 
F-statistic: 37.84 on 4 and 27 DF,  p-value: 1.061e-10</code></pre>
</div>
</div>
<p>The <code>str()</code> funtion displays more complete information contained in the object:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb401"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb401-1"><a href="#cb401-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(lm.model) <span class="co"># This function shows the entire object structure</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The <code>lm()</code> object also contains 4 useful graphs:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb402"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb402-1"><a href="#cb402-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">2</span>)) <span class="co"># Divide the output into a 2 rows x 2 cols frame</span></span>
<span id="cb402-2"><a href="#cb402-2" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(lm.model) <span class="co"># Graph all 4 at once</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="PAML4M_1R_R_Intro_files/figure-html/unnamed-chunk-165-1.png" class="img-fluid" width="960"></p>
</div>
<div class="sourceCode cell-code" id="cb403"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb403-1"><a href="#cb403-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>)) <span class="co"># Reset the output back to 1 row x 1 col frame</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You can also display just one of the plots which may be of interest, say #2</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb404"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb404-1"><a href="#cb404-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(lm.model, </span>
<span id="cb404-2"><a href="#cb404-2" aria-hidden="true" tabindex="-1"></a>     <span class="at">which =</span> <span class="dv">2</span>) <span class="co"># Graph only the second plot</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="PAML4M_1R_R_Intro_files/figure-html/unnamed-chunk-166-1.png" class="img-fluid" width="960"></p>
</div>
</div>
</section>
</section>
</section>
</section>
<section id="r-markdown-and-bookdown" class="level1">
<h1>3. R Markdown and Bookdown</h1>
<section id="r-markdown" class="level2">
<h2 class="anchored" data-anchor-id="r-markdown">R Markdown</h2>
<p>R Markdown is a companion program to R Studio, which allows you to create HTML, PDF, Word, PowerPoint and other documents on the fly, which can include R code and R output. R Markdown is a simple formatting syntax for authoring HTML, PDF, and MS Word documents.</p>
<p><a href="See:%20http://rmarkdown.rstudio.com/">See: http://rmarkdown.rstudio.com/</a></p>
<p>I provide the basics of R Markdown below, but these web sites have excellent material on R Markdown by the author of <code>knitr</code> and other popular packages, Yihui Xie:</p>
<p><a href="https://bookdown.org/yihui/rmarkdown/">https://bookdown.org/yihui/rmarkdown/</a></p>
<p>Yihui Xie also has an excellent R Markdown cookbook:</p>
<p><a href="https://bookdown.org/yihui/rmarkdown-cookbook/">https://bookdown.org/yihui/rmarkdown-cookbook/</a></p>
<p>This is Yuhui Xie’s documentation on <code>knitr</code>:</p>
<p><a href="https://yihui.org/knitr/">https://yihui.org/knitr/</a></p>
<p>The book is free online, but is also available in Amazon:</p>
<p><a href="https://www.amazon.com/dp/1138359335">https://www.amazon.com/dp/1138359335</a></p>
<p>Before you can use R Markdown you need to install and load the “rmarkdown” package with these commands:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb405"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb405-1"><a href="#cb405-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"rmarkdown"</span>)</span>
<span id="cb405-2"><a href="#cb405-2" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(rmarkdown)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Once installed and once you open an R Markdown file with an extension <strong>.Rmd</strong>, you should see a <strong>Knit</strong> icon in the top tool bar or R Studio. Also, when you select File -&gt; New File from the menu, you should see the R Markdown option. If you don’t see either of this, R Markdown is not properly installed in your setup.</p>
<p>you can create R Markdown files from the Menu with File -&gt; New File -&gt; R Markdown -&gt; Document. Enter the document title and author and select Word (or whatever file format you wish)</p>
<p>For more details on using R Markdown see: <a href="http://rmarkdown.rstudio.com">http://rmarkdown.rstudio.com</a>.</p>
<p>For more information see: <a href="https://www.rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf">https://www.rstudio.com/wp-content/uploads/2015/03/rmarkdown-reference.pdf</a></p>
<p>Here is an excellent R Markdown documentation: <a href="https://bookdown.org/yihui/rmarkdown/">https://bookdown.org/yihui/rmarkdown/</a></p>
<p>Also, for a quick <strong>cheatsheet</strong> for R Markdown see: <a href="https://www.rstudio.com/wp-content/uploads/2015/02/rmarkdown-cheatsheet.pdf">https://www.rstudio.com/wp-content/uploads/2015/02/rmarkdown-cheatsheet.pdf</a></p>
<p>For some quick help with R Markdown see: <a href="http://rmarkdown.rstudio.com/authoring_basics.html">http://rmarkdown.rstudio.com/authoring_basics.html</a></p>
<p><strong>Important:</strong> If you see the <strong>Knit</strong> option in the toolbar above, you are all set. If not, you need to install RMarkdown with <code>install.packages("rmarkdown")</code> before you can knit documents. When you click the <strong>Knit</strong> button a document will be generated that includes both content as well as the output of any embedded R code cells within the document. The <code>word_document</code> output above will cause the document to be knitted as a MS Word file. But you can use <code>html_document</code>, <code>pdf_document</code> or <code>powerpoint_presentation</code> instead.</p>
<p><strong>Note:</strong> the r global_options settings at the top of this file affects all the scripts in the R Markdown file. However, you can change the settings in each individual code cell if you wish and these settings will only affect that code cell. In the global settings above, we used:</p>
<p><strong>Note:</strong> As explained, in Quarto, these global options can be set in the YAML.</p>
<p><code>knitr::opts_chunk$set(echo = T, warning = F, message = F)</code></p>
<p><code>echo = F</code> suppreses the code in the knitted document. <code>T</code> shows it.<br>
<code>eval = F</code> causes the code not to run. Useful to explain code. <code>T</code> runs it.<br>
<code>warning = F</code> suppresses warnings generated by the code. <code>T</code> shows it.<br>
<code>message = F</code> suppresses messages generated by the code. <code>T</code> shows it.<br>
<code>include = F</code> suppresses bot code and results. <code>T</code> shows them.<br>
<code>fig.cap = "..."</code> adds a caption to graphical results</p>
<section id="a-few-basics-about-r-markdown" class="level4">
<h4 class="anchored" data-anchor-id="a-few-basics-about-r-markdown">A few Basics About R Markdown</h4>
<p>Use a single pound <code>#</code> sign for a level-1 header Use two pound signs <code>##</code>for a level-2 header, etc.</p>
<p>The table of contents attribute <code>toc: true</code> in the YAML will pickup on these headers to build a table of contents for you.</p>
<p>To run R scripts in R Markdown, either:</p>
<ul>
<li>Knit the whole file, but note that a single error will halt the knitting process</li>
<li>Hit the play icon in top right corner of the code cell to run the entire cell</li>
<li>Go to a specific instruction you want to run and press Ctrl-Enter</li>
</ul>
<p>In the <strong>CarLoan</strong> example above, we can assign names to the code cells. This has little value, but it helps remember what the code cell is about. Please note that if you name your code cells the names have to be unique. Duplicate names will give an error. Most of the times, it is better to not name the code cells. You can also change the parameters of the code cell to display or not display code, results, warnings, etc.</p>
<p>For example, this script will <strong>NOT</strong> display the R code, just the results</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.46</code></pre>
</div>
</div>
<p>This script will display the R code, but <strong>NOT</strong> the output</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb407"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb407-1"><a href="#cb407-1" aria-hidden="true" tabindex="-1"></a>CarPrice <span class="ot">&lt;-</span> <span class="dv">30000</span></span>
<span id="cb407-2"><a href="#cb407-2" aria-hidden="true" tabindex="-1"></a>DownPayment <span class="ot">&lt;-</span> <span class="dv">2000</span></span>
<span id="cb407-3"><a href="#cb407-3" aria-hidden="true" tabindex="-1"></a>LoanYears <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb407-4"><a href="#cb407-4" aria-hidden="true" tabindex="-1"></a>AnnualInterest <span class="ot">&lt;-</span> <span class="fl">0.04</span> <span class="co"># i.e., 4%</span></span>
<span id="cb407-5"><a href="#cb407-5" aria-hidden="true" tabindex="-1"></a>AnnualIncome <span class="ot">&lt;-</span> <span class="dv">60000</span></span>
<span id="cb407-6"><a href="#cb407-6" aria-hidden="true" tabindex="-1"></a>MonthlyObligations <span class="ot">&lt;-</span> <span class="dv">2300</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This code is similar to the one above, but it will not execute. This is useful when you are writing instructions (like in this book) where you want to show some code an explain it, but you don’t want it to execute. For this, use the parameter <code>eval = F</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb408"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb408-1"><a href="#cb408-1" aria-hidden="true" tabindex="-1"></a>CarPrice <span class="ot">=</span> <span class="dv">30000</span></span>
<span id="cb408-2"><a href="#cb408-2" aria-hidden="true" tabindex="-1"></a>DownPayment <span class="ot">=</span> <span class="dv">2000</span></span>
<span id="cb408-3"><a href="#cb408-3" aria-hidden="true" tabindex="-1"></a>LoanYears <span class="ot">=</span> <span class="dv">5</span></span>
<span id="cb408-4"><a href="#cb408-4" aria-hidden="true" tabindex="-1"></a>AnnualInterest <span class="ot">=</span> <span class="fl">0.04</span> <span class="co"># i.e., 4%</span></span>
<span id="cb408-5"><a href="#cb408-5" aria-hidden="true" tabindex="-1"></a>AnnualIncome <span class="ot">=</span> <span class="dv">60000</span></span>
<span id="cb408-6"><a href="#cb408-6" aria-hidden="true" tabindex="-1"></a>MonthlyObligations <span class="ot">=</span> <span class="dv">2300</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="bookdown" class="level2">
<h2 class="anchored" data-anchor-id="bookdown">Bookdown</h2>
<p>Bookdown is another package by R Studio. Like R Markdown, it knits bookdown files, but it also compiles the knitted file into a single book. The link below contains excellent documentation prepared by the author of <code>knitr</code> and other popular packages, Yihui Xie.</p>
<p><a href="https://bookdown.org/yihui/bookdown/">https://bookdown.org/yihui/bookdown/</a></p>
<p>Before you can use <strong>bookdown</strong> you need to install and load the <strong>{bookdown}</strong>” package with these commands:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb409"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb409-1"><a href="#cb409-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"bookdown"</span>)</span>
<span id="cb409-2"><a href="#cb409-2" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(bookdown)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</section>
<section id="quarto" class="level1">
<h1>4. Quarto</h1>
<p>See: <a href="https://quarto.org/">https://quarto.org/</a></p>
<p>User guide: <a href="https://docs.posit.co/ide/user/ide/guide/documents/quarto-project.html">https://docs.posit.co/ide/user/ide/guide/documents/quarto-project.html</a></p>
<p>You can compare R Markdown further at: <a href="https://quarto.org/docs/faq/rmarkdown.html">https://quarto.org/docs/faq/rmarkdown.html</a></p>
<p>Excellent blog on Quarto: <a href="https://www.njtierney.com/">https://www.njtierney.com/</a></p>
<p>Quarto Cheat-Sheet: <a href="https://www.datacamp.com/cheat-sheet/quarto-cheat-sheet-previously-known-as-r-markdown">https://www.datacamp.com/cheat-sheet/quarto-cheat-sheet-previously-known-as-r-markdown</a></p>
<p>Quarto Integration: <a href="https://docs.posit.co/ide/user/ide/guide/documents/quarto-project.html">https://docs.posit.co/ide/user/ide/guide/documents/quarto-project.html</a></p>
<p>Quarto Pointers in R for Data Science: <a href="https://r4ds.hadley.nz/quarto.html">https://r4ds.hadley.nz/quarto.html</a></p>
<p>R Studio is going through a lot of changes to remain competitive in this dynamic market. They recently re-branded the company name to <strong>Posit</strong> (see<a href="https://posit.co/">https://posit.co/</a>). The motivation for this change was to remove the term “R” from the company name to appeal more widely to the programming communities like Python, Julia and others. The IDE program R Studio and R Markdown have not changed names and the company is committed to these products. But in order to cater to other programming communities they have launched a new application named <strong>Quarto</strong>. In a nutshell, Quarto does just about the same things that R Markdown does, but it does it in a more integrated fashion. The wisdom of the experts is that Quarto is not a super set of R Studio. They both have similar functionality, but each has unique features. The good news is that it is really easy to install and use Quarto and the conversion of R Markdown files <strong>.Rmd</strong> to Quarto files <strong>.Qmd</strong> is straight forward, so it is very easy to go back and forth between the too. A few pointers on Quarto:</p>
<ul>
<li><strong>R Markdown</strong> is OK if you plan to knit single <strong>.Rmd</strong> files into single documents and work primarily in R. To use R Markdown you need to install the <code>{rmarkdown}</code> package. R Markdown will use the <code>knitr</code> program to knit text, R code and R output into one document. R Markdown will also use the <code>pandoc</code> program to take the knitr output and convert it your desired format (e.g., HTML, Word, PDF, etc.).</li>
<li>In contrast, <strong>Quarto</strong> installs automatically with R Studio. Quarto is bundled with RStudio v2022.07.1 and higher, so if you install or update to this version or higher, Quarto will be already running with your R Studio.</li>
<li><strong>Quarto</strong> is generally preferred to R Markdown if you: (1) plan to publish documents, as Quarto supports more formats (e.g., ePub for Kindle) and better support to embed graphs, citations and references; (2) Quarto also allows you to combine multiple Quarto files into a single book with the corresponding chapters; (3) want to program in R, Python, Julia and other languages, as Quarto provides better integration of multiple languages and can be installed with Jupyter Notebook).</li>
<li>Related to this last point, The ISLR (R) book has an ISLP (Python) version, so if you want to experiment with Python code, Quarto is much better than R Markdown. Similarly, the R appendices for this book are being translated into Python as we speak. So, I recommend using Quarto, which will facilitate migrating R code to Python and vice-versa.</li>
<li>To convert a <strong>.Rmd R Markdown</strong> file to a <strong>.Qmd Quarto</strong> file, simply rename it and open it in R Studio. Once the file is open, you need to do some minor editing to the <strong>YAML</strong> header. You can explore the YAML header syntax on the site above, but the main changes to make you Quarto file work fine are:</li>
</ul>
<pre><code>`---`
title: "Appendix R1: R Code" (unchanged)  
subtitle: "Introduction to R" (unchanged)  
author: "J. Alberto Espinosa" (unchanged)  
date: "12/31/2023" (unchanged)  

format: (was output: in R Markdown)  
    html: (was html_document: in R Markdown;  
             can be html, pdf, docx, odt, pptx, revealjs, beamer,  
             gfm, commonmark, mediawiki, epub, ipynb)  
      toc: true (unchanged -- table of contents)
      toc-depth: 2 (was `toc-depth:` in R Markdown, the default is 3)  
      toc-expand: 2 (new, denoted how many toc levels to display initially)  
      toc-location: right (new, default is right, can be right, left or body)  
     
eval: true (evaluate--i.e., run the R code or not)  
echo: true (include/suppress R code in the rendered document)  
output:true (run the code, but include/suppress results in rendered document)  
include: true (set echo, output, warning and error together)  
warning: false (display/suppress warnings in rendered document)  
error: false (display/supress errors in the rendered document)  
message: false (display/supress messages in rendered document)  

abstract: This Quarto document contains R code examples for basic statistical analysis associated with descriptive analytics. It also contains examples of predictive modeling with simple linear regression, bi-variate regression with a dummy variables and multivariate analysis. All predictive analytics work should start with very thorough descriptive analytics first, to become familiarized with the data at hand.  
`---`</code></pre>
<p>One more difference between R Markdown and Quarto is that in R Markdown you need to embed the local settings inside the <code>{r}</code> designator, for example:</p>
<pre><code>\```{r fig.width = 10,  fig.height = 6, eval = T}
# R code follows here
\```</code></pre>
<p>In Quarto, you embed these settings inside the R code itself, using the same YAML syntax above. Each setting is prefixed with <code>#|</code>. For example:</p>
<pre><code>\```{r}
#| fig-width: 10
#| fig-height: 6
#| eval: true

# R code follows here
\```</code></pre>
</section>
<section id="shiny" class="level1">
<h1>5. Shiny</h1>
<p>Like R Markdown, Shiny is another R Studio product, which allows you to create interactive web applications. We will not cover Shiny in this course and you will not be required to submit your work in Shiny. But you are more than welcome to explore Shiny on your own and submit your work using Shiny. See:</p>
<p><a href="https://www.rstudio.com/products/shiny/">https://www.rstudio.com/products/shiny/</a></p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>